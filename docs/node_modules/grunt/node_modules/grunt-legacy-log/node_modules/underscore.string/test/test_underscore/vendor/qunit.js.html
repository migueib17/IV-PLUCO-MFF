<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>. documentation: node_modules/grunt/node_modules/grunt-legacy-log/node_modules/underscore.string/test/test_underscore/vendor/qunit.js</title>
  <link rel="stylesheet" href="../../../../../../../../../pyccoon.css">
</head>
<body>
<div id='container' >
  <div id="footer">
    <span id="project-name">
        <a class="btn" href="../../../../../../../../../index.html">. documentation</a>
    </span>
    <a class="btn" class="source source-1" href="#top">Back to top</a>
    <div class="generation-time">
        Generated at
        <code>2015-10-31 20:21</code>
        by a diligent
        <a target="_blank" href="http://ckald.github.io/pyccoon/" title="Pyccoon: side-to-side documentation generator">
            <img id="pyccoon-icon" src="../../../../../../../../../pyccoon_icon.svg" alt="Pyccoon: side-to-side documentation generator" />pyccoon</a>
    </div>
  </div>
  <a id="top"></a>
  <div class='section'>
    <div class='docs nav'>
      <nav id="breadcrumbs">/ <a href="qunit.js.html/../../../../../../../../../../index.html">.</a> / <a href="qunit.js.html/../../../../../../../../../index.html">node_modules</a> / <a href="qunit.js.html/../../../../../../../../index.html">grunt</a> / <a href="qunit.js.html/../../../../../../../index.html">node_modules</a> / <a href="qunit.js.html/../../../../../../index.html">grunt-legacy-log</a> / <a href="qunit.js.html/../../../../../index.html">node_modules</a> / <a href="qunit.js.html/../../../../index.html">underscore.string</a> / <a href="qunit.js.html/../../../index.html">test</a> / <a href="qunit.js.html/../../index.html">test_underscore</a> / <a href="qunit.js.html/../index.html">vendor</a> / qunit.js</nav>
      <ul id="children"></ul>
    </div>
  </div>
  <div id="everything" class='clearall'>
    <div id="background"></div>
    <div class='section'>
    <a id="section-0" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-0'>#</a>
          </div>
          <p>QUnit v1.10.0 - A JavaScript Unit Testing Framework</p>
<p><a href="http://qunitjs.com">http://qunitjs.com</a></p>
<p>Copyright 2012 jQuery Foundation and other contributors
 Released under the MIT license.
 <a href="http://jquery.org/license">http://jquery.org/license</a></p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nb">window</span> <span class="p">)</span> <span class="p">{</span>

<span class="kd">var</span> <span class="nx">QUnit</span><span class="p">,</span>
	<span class="nx">config</span><span class="p">,</span>
	<span class="nx">onErrorFnPrev</span><span class="p">,</span>
	<span class="nx">testId</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	<span class="nx">fileName</span> <span class="o">=</span> <span class="p">(</span><span class="nx">sourceFromStacktrace</span><span class="p">(</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/(:\d+)+\)?/</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/.+\//</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
	<span class="nx">toString</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">,</span>
	<span class="nx">hasOwn</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">,</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-1" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-1'>#</a>
          </div>
          <p>Keep a local reference to Date (GH-283)</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nb">Date</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nb">Date</span><span class="p">,</span>
	<span class="nx">defined</span> <span class="o">=</span> <span class="p">{</span>
	<span class="nx">setTimeout</span><span class="o">:</span> <span class="k">typeof</span> <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">,</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-2" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-2'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">sessionStorage</span><span class="o">:</span> <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="s2">&quot;qunit-test-string&quot;</span><span class="p">;</span>
		<span class="k">try</span> <span class="p">{</span>
			<span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">x</span> <span class="p">);</span>
			<span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span> <span class="nx">x</span> <span class="p">);</span>
			<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}())</span>
<span class="p">};</span>

<span class="kd">function</span> <span class="nx">Test</span><span class="p">(</span> <span class="nx">settings</span> <span class="p">)</span> <span class="p">{</span>
	<span class="nx">extend</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">settings</span> <span class="p">);</span>
	<span class="k">this</span><span class="p">.</span><span class="nx">assertions</span> <span class="o">=</span> <span class="p">[];</span>
	<span class="k">this</span><span class="p">.</span><span class="nx">testNumber</span> <span class="o">=</span> <span class="o">++</span><span class="nx">Test</span><span class="p">.</span><span class="nx">count</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">Test</span><span class="p">.</span><span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="nx">Test</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-3" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-3'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">li</span><span class="p">,</span>
        <span class="nx">tests</span> <span class="o">=</span> <span class="nx">id</span><span class="p">(</span> <span class="s2">&quot;qunit-tests&quot;</span> <span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span> <span class="nx">tests</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">b</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;strong&quot;</span> <span class="p">);</span>
			<span class="nx">b</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-4" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-4'>#</a>
          </div>
          <p><code>a</code> initialized at top of scope</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="nx">a</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;a&quot;</span> <span class="p">);</span>
			<span class="nx">a</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;Rerun&quot;</span><span class="p">;</span>
			<span class="nx">a</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">url</span><span class="p">({</span> <span class="nx">testNumber</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">testNumber</span> <span class="p">});</span>

			<span class="nx">li</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;li&quot;</span> <span class="p">);</span>
			<span class="nx">li</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">b</span> <span class="p">);</span>
			<span class="nx">li</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">a</span> <span class="p">);</span>
			<span class="nx">li</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s2">&quot;running&quot;</span><span class="p">;</span>
			<span class="nx">li</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="s2">&quot;qunit-test-output&quot;</span> <span class="o">+</span> <span class="nx">testId</span><span class="o">++</span><span class="p">;</span>

			<span class="nx">tests</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">li</span> <span class="p">);</span>
		<span class="p">}</span>
	<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-5" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-5'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">setup</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">module</span> <span class="o">!==</span> <span class="nx">config</span><span class="p">.</span><span class="nx">previousModule</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">previousModule</span> <span class="p">)</span> <span class="p">{</span>
				<span class="nx">runLoggingCallbacks</span><span class="p">(</span> <span class="s2">&quot;moduleDone&quot;</span><span class="p">,</span> <span class="nx">QUnit</span><span class="p">,</span> <span class="p">{</span>
					<span class="nx">name</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">previousModule</span><span class="p">,</span>
					<span class="nx">failed</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">moduleStats</span><span class="p">.</span><span class="nx">bad</span><span class="p">,</span>
					<span class="nx">passed</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">moduleStats</span><span class="p">.</span><span class="nx">all</span> <span class="o">-</span> <span class="nx">config</span><span class="p">.</span><span class="nx">moduleStats</span><span class="p">.</span><span class="nx">bad</span><span class="p">,</span>
					<span class="nx">total</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">moduleStats</span><span class="p">.</span><span class="nx">all</span>
				<span class="p">});</span>
			<span class="p">}</span>
			<span class="nx">config</span><span class="p">.</span><span class="nx">previousModule</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">module</span><span class="p">;</span>
			<span class="nx">config</span><span class="p">.</span><span class="nx">moduleStats</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">all</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">bad</span><span class="o">:</span> <span class="mi">0</span> <span class="p">};</span>
			<span class="nx">runLoggingCallbacks</span><span class="p">(</span> <span class="s2">&quot;moduleStart&quot;</span><span class="p">,</span> <span class="nx">QUnit</span><span class="p">,</span> <span class="p">{</span>
				<span class="nx">name</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">module</span>
			<span class="p">});</span>
		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">autorun</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">runLoggingCallbacks</span><span class="p">(</span> <span class="s2">&quot;moduleStart&quot;</span><span class="p">,</span> <span class="nx">QUnit</span><span class="p">,</span> <span class="p">{</span>
				<span class="nx">name</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">module</span>
			<span class="p">});</span>
		<span class="p">}</span>

		<span class="nx">config</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">testEnvironment</span> <span class="o">=</span> <span class="nx">extend</span><span class="p">({</span>

			<span class="nx">setup</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-6" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-6'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="nx">teardown</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{}</span>
		<span class="p">},</span> <span class="k">this</span><span class="p">.</span><span class="nx">moduleTestEnvironment</span> <span class="p">);</span>

		<span class="nx">runLoggingCallbacks</span><span class="p">(</span> <span class="s2">&quot;testStart&quot;</span><span class="p">,</span> <span class="nx">QUnit</span><span class="p">,</span> <span class="p">{</span>
			<span class="nx">name</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">testName</span><span class="p">,</span>
			<span class="nx">module</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">module</span>
		<span class="p">});</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-7" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-7'>#</a>
          </div>
          <p>allow utility functions to access the current test environment
<span class=todo><strong>TODO</strong> why??</span></p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="nx">QUnit</span><span class="p">.</span><span class="nx">current_testEnvironment</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">testEnvironment</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">config</span><span class="p">.</span><span class="nx">pollution</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">saveGlobal</span><span class="p">();</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">notrycatch</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">testEnvironment</span><span class="p">.</span><span class="nx">setup</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">testEnvironment</span> <span class="p">);</span>
			<span class="k">return</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">try</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">testEnvironment</span><span class="p">.</span><span class="nx">setup</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">testEnvironment</span> <span class="p">);</span>
		<span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">QUnit</span><span class="p">.</span><span class="nx">pushFailure</span><span class="p">(</span> <span class="s2">&quot;Setup failed on &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">testName</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="nx">e</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span> <span class="nx">extractStacktrace</span><span class="p">(</span> <span class="nx">e</span><span class="p">,</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">);</span>
		<span class="p">}</span>
	<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-8" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-8'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">run</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="nx">config</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

		<span class="kd">var</span> <span class="nx">running</span> <span class="o">=</span> <span class="nx">id</span><span class="p">(</span> <span class="s2">&quot;qunit-testresult&quot;</span> <span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span> <span class="nx">running</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">running</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;Running: &lt;br/&gt;&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">async</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">QUnit</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">notrycatch</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">callback</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">testEnvironment</span><span class="p">,</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">assert</span> <span class="p">);</span>
			<span class="k">return</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="k">try</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">callback</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">testEnvironment</span><span class="p">,</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">assert</span> <span class="p">);</span>
		<span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">QUnit</span><span class="p">.</span><span class="nx">pushFailure</span><span class="p">(</span> <span class="s2">&quot;Died on test #&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">assertions</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">stack</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="nx">e</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span> <span class="nx">extractStacktrace</span><span class="p">(</span> <span class="nx">e</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-9" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-9'>#</a>
          </div>
          <p>else next test will carry the responsibility</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="nx">saveGlobal</span><span class="p">();</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-10" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-10'>#</a>
          </div>
          <p>Restart the tests if they're blocking</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="k">if</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">blocking</span> <span class="p">)</span> <span class="p">{</span>
				<span class="nx">QUnit</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-11" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-11'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">teardown</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="nx">config</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">notrycatch</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">testEnvironment</span><span class="p">.</span><span class="nx">teardown</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">testEnvironment</span> <span class="p">);</span>
			<span class="k">return</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">try</span> <span class="p">{</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">testEnvironment</span><span class="p">.</span><span class="nx">teardown</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">testEnvironment</span> <span class="p">);</span>
			<span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
				<span class="nx">QUnit</span><span class="p">.</span><span class="nx">pushFailure</span><span class="p">(</span> <span class="s2">&quot;Teardown failed on &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">testName</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="nx">e</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span> <span class="nx">extractStacktrace</span><span class="p">(</span> <span class="nx">e</span><span class="p">,</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">);</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="nx">checkPollution</span><span class="p">();</span>
	<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-12" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-12'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">finish</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="nx">config</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">requireExpects</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">expected</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">QUnit</span><span class="p">.</span><span class="nx">pushFailure</span><span class="p">(</span> <span class="s2">&quot;Expected number of assertions to be defined, but expect() was not called.&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">stack</span> <span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">expected</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">expected</span> <span class="o">!=</span> <span class="k">this</span><span class="p">.</span><span class="nx">assertions</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">QUnit</span><span class="p">.</span><span class="nx">pushFailure</span><span class="p">(</span> <span class="s2">&quot;Expected &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">expected</span> <span class="o">+</span> <span class="s2">&quot; assertions, but &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">assertions</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="s2">&quot; were run&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">stack</span> <span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">expected</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">assertions</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">QUnit</span><span class="p">.</span><span class="nx">pushFailure</span><span class="p">(</span> <span class="s2">&quot;Expected at least one assertion, but none were run - call expect(0) to accept zero assertions.&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">stack</span> <span class="p">);</span>
		<span class="p">}</span>

		<span class="kd">var</span> <span class="nx">assertion</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">li</span><span class="p">,</span> <span class="nx">ol</span><span class="p">,</span>
			<span class="nx">test</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
			<span class="nx">good</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
			<span class="nx">bad</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
			<span class="nx">tests</span> <span class="o">=</span> <span class="nx">id</span><span class="p">(</span> <span class="s2">&quot;qunit-tests&quot;</span> <span class="p">);</span>

		<span class="nx">config</span><span class="p">.</span><span class="nx">stats</span><span class="p">.</span><span class="nx">all</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">assertions</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
		<span class="nx">config</span><span class="p">.</span><span class="nx">moduleStats</span><span class="p">.</span><span class="nx">all</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">assertions</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span> <span class="nx">tests</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">ol</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;ol&quot;</span> <span class="p">);</span>

			<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">assertions</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
				<span class="nx">assertion</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">assertions</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

				<span class="nx">li</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;li&quot;</span> <span class="p">);</span>
				<span class="nx">li</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">assertion</span><span class="p">.</span><span class="nx">result</span> <span class="o">?</span> <span class="s2">&quot;pass&quot;</span> <span class="o">:</span> <span class="s2">&quot;fail&quot;</span><span class="p">;</span>
				<span class="nx">li</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">assertion</span><span class="p">.</span><span class="nx">message</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">assertion</span><span class="p">.</span><span class="nx">result</span> <span class="o">?</span> <span class="s2">&quot;okay&quot;</span> <span class="o">:</span> <span class="s2">&quot;failed&quot;</span> <span class="p">);</span>
				<span class="nx">ol</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">li</span> <span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span> <span class="nx">assertion</span><span class="p">.</span><span class="nx">result</span> <span class="p">)</span> <span class="p">{</span>
					<span class="nx">good</span><span class="o">++</span><span class="p">;</span>
				<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
					<span class="nx">bad</span><span class="o">++</span><span class="p">;</span>
					<span class="nx">config</span><span class="p">.</span><span class="nx">stats</span><span class="p">.</span><span class="nx">bad</span><span class="o">++</span><span class="p">;</span>
					<span class="nx">config</span><span class="p">.</span><span class="nx">moduleStats</span><span class="p">.</span><span class="nx">bad</span><span class="o">++</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-13" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-13'>#</a>
          </div>
          <p>store result when possible</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="k">if</span> <span class="p">(</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">reorder</span> <span class="o">&amp;&amp;</span> <span class="nx">defined</span><span class="p">.</span><span class="nx">sessionStorage</span> <span class="p">)</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span> <span class="nx">bad</span> <span class="p">)</span> <span class="p">{</span>
					<span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span> <span class="s2">&quot;qunit-test-&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">module</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">testName</span><span class="p">,</span> <span class="nx">bad</span> <span class="p">);</span>
				<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
					<span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span> <span class="s2">&quot;qunit-test-&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">module</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">testName</span> <span class="p">);</span>
				<span class="p">}</span>
			<span class="p">}</span>

			<span class="k">if</span> <span class="p">(</span> <span class="nx">bad</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
				<span class="nx">ol</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span><span class="p">;</span>
			<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-14" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-14'>#</a>
          </div>
          <p><code>b</code> initialized at top of scope</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="nx">b</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;strong&quot;</span> <span class="p">);</span>
			<span class="nx">b</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot; &lt;b class=&#39;counts&#39;&gt;(&lt;b class=&#39;failed&#39;&gt;&quot;</span> <span class="o">+</span> <span class="nx">bad</span> <span class="o">+</span> <span class="s2">&quot;&lt;/b&gt;, &lt;b class=&#39;passed&#39;&gt;&quot;</span> <span class="o">+</span> <span class="nx">good</span> <span class="o">+</span> <span class="s2">&quot;&lt;/b&gt;, &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">assertions</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="s2">&quot;)&lt;/b&gt;&quot;</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-15" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-15'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="nx">addEvent</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">,</span>
					<span class="nx">display</span> <span class="o">=</span> <span class="nx">next</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="p">;</span>
				<span class="nx">next</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="nx">display</span> <span class="o">===</span> <span class="s2">&quot;none&quot;</span> <span class="o">?</span> <span class="s2">&quot;block&quot;</span> <span class="o">:</span> <span class="s2">&quot;none&quot;</span><span class="p">;</span>
			<span class="p">});</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-16" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-16'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="nx">addEvent</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="s2">&quot;dblclick&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">e</span> <span class="o">&amp;&amp;</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span> <span class="o">?</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span> <span class="o">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">srcElement</span><span class="p">;</span>
				<span class="k">if</span> <span class="p">(</span> <span class="nx">target</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;span&quot;</span> <span class="o">||</span> <span class="nx">target</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;b&quot;</span> <span class="p">)</span> <span class="p">{</span>
					<span class="nx">target</span> <span class="o">=</span> <span class="nx">target</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="k">if</span> <span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span> <span class="o">&amp;&amp;</span> <span class="nx">target</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&quot;strong&quot;</span> <span class="p">)</span> <span class="p">{</span>
					<span class="nb">window</span><span class="p">.</span><span class="nx">location</span> <span class="o">=</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">url</span><span class="p">({</span> <span class="nx">testNumber</span><span class="o">:</span> <span class="nx">test</span><span class="p">.</span><span class="nx">testNumber</span> <span class="p">});</span>
				<span class="p">}</span>
			<span class="p">});</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-17" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-17'>#</a>
          </div>
          <p><code>li</code> initialized at top of scope</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="nx">li</span> <span class="o">=</span> <span class="nx">id</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="p">);</span>
			<span class="nx">li</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">bad</span> <span class="o">?</span> <span class="s2">&quot;fail&quot;</span> <span class="o">:</span> <span class="s2">&quot;pass&quot;</span><span class="p">;</span>
			<span class="nx">li</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">li</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>
			<span class="nx">a</span> <span class="o">=</span> <span class="nx">li</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>
			<span class="nx">li</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">b</span> <span class="p">);</span>
			<span class="nx">li</span><span class="p">.</span><span class="nx">appendChild</span> <span class="p">(</span> <span class="nx">a</span> <span class="p">);</span>
			<span class="nx">li</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">ol</span> <span class="p">);</span>

		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">assertions</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">assertions</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">result</span> <span class="p">)</span> <span class="p">{</span>
					<span class="nx">bad</span><span class="o">++</span><span class="p">;</span>
					<span class="nx">config</span><span class="p">.</span><span class="nx">stats</span><span class="p">.</span><span class="nx">bad</span><span class="o">++</span><span class="p">;</span>
					<span class="nx">config</span><span class="p">.</span><span class="nx">moduleStats</span><span class="p">.</span><span class="nx">bad</span><span class="o">++</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="p">}</span>

		<span class="nx">runLoggingCallbacks</span><span class="p">(</span> <span class="s2">&quot;testDone&quot;</span><span class="p">,</span> <span class="nx">QUnit</span><span class="p">,</span> <span class="p">{</span>
			<span class="nx">name</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">testName</span><span class="p">,</span>
			<span class="nx">module</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">module</span><span class="p">,</span>
			<span class="nx">failed</span><span class="o">:</span> <span class="nx">bad</span><span class="p">,</span>
			<span class="nx">passed</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">assertions</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">bad</span><span class="p">,</span>
			<span class="nx">total</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">assertions</span><span class="p">.</span><span class="nx">length</span>
		<span class="p">});</span>

		<span class="nx">QUnit</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>

		<span class="nx">config</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
	<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-18" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-18'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">queue</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">bad</span><span class="p">,</span>
			<span class="nx">test</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

		<span class="nx">synchronize</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
			<span class="nx">test</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>
		<span class="p">});</span>
		<span class="kd">function</span> <span class="nx">run</span><span class="p">()</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-19" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-19'>#</a>
          </div>
          <p>each of these can by async</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="nx">synchronize</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="nx">test</span><span class="p">.</span><span class="nx">setup</span><span class="p">();</span>
			<span class="p">});</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-20" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-20'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="nx">synchronize</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="nx">test</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>
			<span class="p">});</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-21" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-21'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="nx">synchronize</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="nx">test</span><span class="p">.</span><span class="nx">teardown</span><span class="p">();</span>
			<span class="p">});</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-22" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-22'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="nx">synchronize</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="nx">test</span><span class="p">.</span><span class="nx">finish</span><span class="p">();</span>
			<span class="p">});</span>
		<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-23" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-23'>#</a>
          </div>
          <p><code>bad</code> initialized at top of scope
defer when previous test run passed, if storage is available</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="nx">bad</span> <span class="o">=</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">reorder</span> <span class="o">&amp;&amp;</span> <span class="nx">defined</span><span class="p">.</span><span class="nx">sessionStorage</span> <span class="o">&amp;&amp;</span>
						<span class="o">+</span><span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span> <span class="s2">&quot;qunit-test-&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">module</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">testName</span> <span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span> <span class="nx">bad</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">run</span><span class="p">();</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="nx">synchronize</span><span class="p">(</span> <span class="nx">run</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-24" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-24'>#</a>
          </div>
          <p>Root QUnit object.
<code>QUnit</code> initialized at top of scope</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">QUnit</span> <span class="o">=</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-25" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-25'>#</a>
          </div>
          <p>call on start of module test to prepend name to all tests</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">module</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">testEnvironment</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">config</span><span class="p">.</span><span class="nx">currentModule</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
		<span class="nx">config</span><span class="p">.</span><span class="nx">currentModuleTestEnvironment</span> <span class="o">=</span> <span class="nx">testEnvironment</span><span class="p">;</span>
		<span class="nx">config</span><span class="p">.</span><span class="nx">modules</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
	<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-26" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-26'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">asyncTest</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">testName</span><span class="p">,</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">callback</span> <span class="o">=</span> <span class="nx">expected</span><span class="p">;</span>
			<span class="nx">expected</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="nx">QUnit</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">testName</span><span class="p">,</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
	<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-27" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-27'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">test</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">testName</span><span class="p">,</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">async</span> <span class="p">)</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">test</span><span class="p">,</span>
			<span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;&lt;span class=&#39;test-name&#39;&gt;&quot;</span> <span class="o">+</span> <span class="nx">escapeInnerText</span><span class="p">(</span> <span class="nx">testName</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">callback</span> <span class="o">=</span> <span class="nx">expected</span><span class="p">;</span>
			<span class="nx">expected</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">currentModule</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;&lt;span class=&#39;module-name&#39;&gt;&quot;</span> <span class="o">+</span> <span class="nx">config</span><span class="p">.</span><span class="nx">currentModule</span> <span class="o">+</span> <span class="s2">&quot;&lt;/span&gt;: &quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="nx">test</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Test</span><span class="p">({</span>
			<span class="nx">name</span><span class="o">:</span> <span class="nx">name</span><span class="p">,</span>
			<span class="nx">testName</span><span class="o">:</span> <span class="nx">testName</span><span class="p">,</span>
			<span class="nx">expected</span><span class="o">:</span> <span class="nx">expected</span><span class="p">,</span>
			<span class="nx">async</span><span class="o">:</span> <span class="nx">async</span><span class="p">,</span>
			<span class="nx">callback</span><span class="o">:</span> <span class="nx">callback</span><span class="p">,</span>
			<span class="nx">module</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">currentModule</span><span class="p">,</span>
			<span class="nx">moduleTestEnvironment</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">currentModuleTestEnvironment</span><span class="p">,</span>
			<span class="nx">stack</span><span class="o">:</span> <span class="nx">sourceFromStacktrace</span><span class="p">(</span> <span class="mi">2</span> <span class="p">)</span>
		<span class="p">});</span>

		<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">validTest</span><span class="p">(</span> <span class="nx">test</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">return</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="nx">test</span><span class="p">.</span><span class="nx">queue</span><span class="p">();</span>
	<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-28" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-28'>#</a>
          </div>
          <p>Specify the number of expected assertions to gurantee that failed test (no assertions are run at all) don't slip through.</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">expect</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">asserts</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">config</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">expected</span> <span class="o">=</span> <span class="nx">asserts</span><span class="p">;</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="k">return</span> <span class="nx">config</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">expected</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-29" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-29'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">start</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">count</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">config</span><span class="p">.</span><span class="nx">semaphore</span> <span class="o">-=</span> <span class="nx">count</span> <span class="o">||</span> <span class="mi">1</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-30" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-30'>#</a>
          </div>
          <p>don't start until equal number of stop-calls</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="k">if</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">semaphore</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">return</span><span class="p">;</span>
		<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-31" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-31'>#</a>
          </div>
          <p>ignore if start is called more often then stop</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="k">if</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">semaphore</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">config</span><span class="p">.</span><span class="nx">semaphore</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-32" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-32'>#</a>
          </div>
          <p>A slight delay, to avoid any current callbacks</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="k">if</span> <span class="p">(</span> <span class="nx">defined</span><span class="p">.</span><span class="nx">setTimeout</span> <span class="p">)</span> <span class="p">{</span>

			<span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">semaphore</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
					<span class="k">return</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="k">if</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">timeout</span> <span class="p">)</span> <span class="p">{</span>
					<span class="nx">clearTimeout</span><span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">timeout</span> <span class="p">);</span>
				<span class="p">}</span>

				<span class="nx">config</span><span class="p">.</span><span class="nx">blocking</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
				<span class="nx">process</span><span class="p">(</span> <span class="kc">true</span> <span class="p">);</span>
			<span class="p">},</span> <span class="mi">13</span><span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="nx">config</span><span class="p">.</span><span class="nx">blocking</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
			<span class="nx">process</span><span class="p">(</span> <span class="kc">true</span> <span class="p">);</span>
		<span class="p">}</span>
	<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-33" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-33'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">stop</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">count</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">config</span><span class="p">.</span><span class="nx">semaphore</span> <span class="o">+=</span> <span class="nx">count</span> <span class="o">||</span> <span class="mi">1</span><span class="p">;</span>
		<span class="nx">config</span><span class="p">.</span><span class="nx">blocking</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">testTimeout</span> <span class="o">&amp;&amp;</span> <span class="nx">defined</span><span class="p">.</span><span class="nx">setTimeout</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">clearTimeout</span><span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">timeout</span> <span class="p">);</span>

			<span class="nx">config</span><span class="p">.</span><span class="nx">timeout</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="nx">QUnit</span><span class="p">.</span><span class="nx">ok</span><span class="p">(</span> <span class="kc">false</span><span class="p">,</span> <span class="s2">&quot;Test timed out&quot;</span> <span class="p">);</span>
				<span class="nx">config</span><span class="p">.</span><span class="nx">semaphore</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
				<span class="nx">QUnit</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
			<span class="p">},</span> <span class="nx">config</span><span class="p">.</span><span class="nx">testTimeout</span> <span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-34" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-34'>#</a>
          </div>
          <p>Asssert helpers
All of these must call either QUnit.push() or manually do:
- runLoggingCallbacks( "log", .. );
- config.current.assertions.push({ .. });</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">QUnit</span><span class="p">.</span><span class="nx">assert</span> <span class="o">=</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-35" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-35'>#</a>
          </div>
          <p>Asserts rough true-ish result.
 <span class="pydoc pydoc-name"><span>name</span> <code>ok</code></span> 
 <span class="pydoc pydoc-function"><span>function</span></span>
 <span class="pydoc pydoc-example"><span>example</span> <code>ok(</code></span> "asdfasdf".length &gt; 5, "There must be at least 5 chars" );</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">ok</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">msg</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">config</span><span class="p">.</span><span class="nx">current</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span> <span class="s2">&quot;ok() assertion outside test context, was &quot;</span> <span class="o">+</span> <span class="nx">sourceFromStacktrace</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="p">);</span>
		<span class="p">}</span>
		<span class="nx">result</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">result</span><span class="p">;</span>

		<span class="kd">var</span> <span class="nx">source</span><span class="p">,</span>
			<span class="nx">details</span> <span class="o">=</span> <span class="p">{</span>
				<span class="nx">module</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">module</span><span class="p">,</span>
				<span class="nx">name</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">testName</span><span class="p">,</span>
				<span class="nx">result</span><span class="o">:</span> <span class="nx">result</span><span class="p">,</span>
				<span class="nx">message</span><span class="o">:</span> <span class="nx">msg</span>
			<span class="p">};</span>

		<span class="nx">msg</span> <span class="o">=</span> <span class="nx">escapeInnerText</span><span class="p">(</span> <span class="nx">msg</span> <span class="o">||</span> <span class="p">(</span><span class="nx">result</span> <span class="o">?</span> <span class="s2">&quot;okay&quot;</span> <span class="o">:</span> <span class="s2">&quot;failed&quot;</span> <span class="p">)</span> <span class="p">);</span>
		<span class="nx">msg</span> <span class="o">=</span> <span class="s2">&quot;&lt;span class=&#39;test-message&#39;&gt;&quot;</span> <span class="o">+</span> <span class="nx">msg</span> <span class="o">+</span> <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">result</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">source</span> <span class="o">=</span> <span class="nx">sourceFromStacktrace</span><span class="p">(</span> <span class="mi">2</span> <span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span> <span class="nx">source</span> <span class="p">)</span> <span class="p">{</span>
				<span class="nx">details</span><span class="p">.</span><span class="nx">source</span> <span class="o">=</span> <span class="nx">source</span><span class="p">;</span>
				<span class="nx">msg</span> <span class="o">+=</span> <span class="s2">&quot;&lt;table&gt;&lt;tr class=&#39;test-source&#39;&gt;&lt;th&gt;Source: &lt;/th&gt;&lt;td&gt;&lt;pre&gt;&quot;</span> <span class="o">+</span> <span class="nx">escapeInnerText</span><span class="p">(</span> <span class="nx">source</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="nx">runLoggingCallbacks</span><span class="p">(</span> <span class="s2">&quot;log&quot;</span><span class="p">,</span> <span class="nx">QUnit</span><span class="p">,</span> <span class="nx">details</span> <span class="p">);</span>
		<span class="nx">config</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">assertions</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
			<span class="nx">result</span><span class="o">:</span> <span class="nx">result</span><span class="p">,</span>
			<span class="nx">message</span><span class="o">:</span> <span class="nx">msg</span>
		<span class="p">});</span>
	<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-36" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-36'>#</a>
          </div>
          <p>Assert that the first two arguments are equal, with an optional message.
 Prints out both actual and expected values.
 <span class="pydoc pydoc-name"><span>name</span> <code>equal</code></span> 
 <span class="pydoc pydoc-function"><span>function</span></span>
 <span class="pydoc pydoc-example"><span>example</span> <code>equal(</code></span> format( "Received {0} bytes.", 2), "Received 2 bytes.", "format() replaces {0} with next argument" );</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">equal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">actual</span><span class="p">,</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">message</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">QUnit</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">expected</span> <span class="o">==</span> <span class="nx">actual</span><span class="p">,</span> <span class="nx">actual</span><span class="p">,</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">message</span> <span class="p">);</span>
	<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-37" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-37'>#</a>
          </div>
          <p><span class="pydoc pydoc-name"><span>name</span> <code>notEqual</code></span> 
 <span class="pydoc pydoc-function"><span>function</span></span></p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">notEqual</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">actual</span><span class="p">,</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">message</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">QUnit</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">expected</span> <span class="o">!=</span> <span class="nx">actual</span><span class="p">,</span> <span class="nx">actual</span><span class="p">,</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">message</span> <span class="p">);</span>
	<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-38" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-38'>#</a>
          </div>
          <p><span class="pydoc pydoc-name"><span>name</span> <code>deepEqual</code></span> 
 <span class="pydoc pydoc-function"><span>function</span></span></p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">deepEqual</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">actual</span><span class="p">,</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">message</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">QUnit</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">equiv</span><span class="p">(</span><span class="nx">actual</span><span class="p">,</span> <span class="nx">expected</span><span class="p">),</span> <span class="nx">actual</span><span class="p">,</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">message</span> <span class="p">);</span>
	<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-39" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-39'>#</a>
          </div>
          <p><span class="pydoc pydoc-name"><span>name</span> <code>notDeepEqual</code></span> 
 <span class="pydoc pydoc-function"><span>function</span></span></p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">notDeepEqual</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">actual</span><span class="p">,</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">message</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">QUnit</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="o">!</span><span class="nx">QUnit</span><span class="p">.</span><span class="nx">equiv</span><span class="p">(</span><span class="nx">actual</span><span class="p">,</span> <span class="nx">expected</span><span class="p">),</span> <span class="nx">actual</span><span class="p">,</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">message</span> <span class="p">);</span>
	<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-40" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-40'>#</a>
          </div>
          <p><span class="pydoc pydoc-name"><span>name</span> <code>strictEqual</code></span> 
 <span class="pydoc pydoc-function"><span>function</span></span></p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">strictEqual</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">actual</span><span class="p">,</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">message</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">QUnit</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">expected</span> <span class="o">===</span> <span class="nx">actual</span><span class="p">,</span> <span class="nx">actual</span><span class="p">,</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">message</span> <span class="p">);</span>
	<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-41" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-41'>#</a>
          </div>
          <p><span class="pydoc pydoc-name"><span>name</span> <code>notStrictEqual</code></span> 
 <span class="pydoc pydoc-function"><span>function</span></span></p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">notStrictEqual</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">actual</span><span class="p">,</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">message</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">QUnit</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">expected</span> <span class="o">!==</span> <span class="nx">actual</span><span class="p">,</span> <span class="nx">actual</span><span class="p">,</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">message</span> <span class="p">);</span>
	<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-42" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-42'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="kr">throws</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">block</span><span class="p">,</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">message</span> <span class="p">)</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">actual</span><span class="p">,</span>
			<span class="nx">ok</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-43" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-43'>#</a>
          </div>
          <p>'expected' is optional</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">expected</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">message</span> <span class="o">=</span> <span class="nx">expected</span><span class="p">;</span>
			<span class="nx">expected</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="nx">config</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">ignoreGlobalErrors</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
		<span class="k">try</span> <span class="p">{</span>
			<span class="nx">block</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">testEnvironment</span> <span class="p">);</span>
		<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">actual</span> <span class="o">=</span> <span class="nx">e</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="nx">config</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">ignoreGlobalErrors</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span> <span class="nx">actual</span> <span class="p">)</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-44" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-44'>#</a>
          </div>
          <p>we don't want to validate thrown error</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">expected</span> <span class="p">)</span> <span class="p">{</span>
				<span class="nx">ok</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-45" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-45'>#</a>
          </div>
          <p>expected is a regexp</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">objectType</span><span class="p">(</span> <span class="nx">expected</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;regexp&quot;</span> <span class="p">)</span> <span class="p">{</span>
				<span class="nx">ok</span> <span class="o">=</span> <span class="nx">expected</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">actual</span> <span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-46" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-46'>#</a>
          </div>
          <p>expected is a constructor</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">actual</span> <span class="k">instanceof</span> <span class="nx">expected</span> <span class="p">)</span> <span class="p">{</span>
				<span class="nx">ok</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-47" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-47'>#</a>
          </div>
          <p>expected is a validation function which returns true is validation passed</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">expected</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="p">{},</span> <span class="nx">actual</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">{</span>
				<span class="nx">ok</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
			<span class="p">}</span>

			<span class="nx">QUnit</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">ok</span><span class="p">,</span> <span class="nx">actual</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">message</span> <span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="nx">QUnit</span><span class="p">.</span><span class="nx">pushFailure</span><span class="p">(</span> <span class="nx">message</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s1">&#39;No exception was thrown.&#39;</span> <span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-48" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-48'>#</a>
          </div>
          <p><span class="pydoc pydoc-deprecate"><span>deprecate</span> <code>since</code></span> 1.8.0
 Kept assertion helpers in root for backwards compatibility</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">extend</span><span class="p">(</span> <span class="nx">QUnit</span><span class="p">,</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">assert</span> <span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-49" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-49'>#</a>
          </div>
          <p><span class="pydoc pydoc-deprecated"><span>deprecated</span> <code>since</code></span> 1.9.0
 Kept global "raises()" for backwards compatibility</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">QUnit</span><span class="p">.</span><span class="nx">raises</span> <span class="o">=</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">assert</span><span class="p">.</span><span class="kr">throws</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-50" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-50'>#</a>
          </div>
          <p><span class="pydoc pydoc-deprecated"><span>deprecated</span> <code>since</code></span> 1.0.0, replaced with error pushes since 1.3.0
 Kept to avoid TypeErrors for undefined methods.</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">QUnit</span><span class="p">.</span><span class="nx">equals</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">QUnit</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="s2">&quot;QUnit.equals has been deprecated since 2009 (e88049a0), use QUnit.equal instead&quot;</span> <span class="p">);</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-51" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-51'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">QUnit</span><span class="p">.</span><span class="nx">same</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">QUnit</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="s2">&quot;QUnit.same has been deprecated since 2009 (e88049a0), use QUnit.deepEqual instead&quot;</span> <span class="p">);</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-52" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-52'>#</a>
          </div>
          <p>We want access to the constructor's prototype</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	<span class="kd">function</span> <span class="nx">F</span><span class="p">()</span> <span class="p">{}</span>
	<span class="nx">F</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">QUnit</span><span class="p">;</span>
	<span class="nx">QUnit</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">F</span><span class="p">();</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-53" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-53'>#</a>
          </div>
          <p>Make F QUnit's constructor so that we can add to the prototype later</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">QUnit</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">F</span><span class="p">;</span>
<span class="p">}());</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-54" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-54'>#</a>
          </div>
          <p>Config object: Maintain internal state
 Later exposed as QUnit.config
 <code>config</code> initialized at top of scope</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">config</span> <span class="o">=</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-55" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-55'>#</a>
          </div>
          <p>The queue of tests to run</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">queue</span><span class="o">:</span> <span class="p">[],</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-56" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-56'>#</a>
          </div>
          <p>block until document ready</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">blocking</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-57" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-57'>#</a>
          </div>
          <p>when enabled, show only failing tests
gets persisted through sessionStorage and can be changed in UI via checkbox</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">hidepassed</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-58" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-58'>#</a>
          </div>
          <p>by default, run previously failed tests first
very useful in combination with "Hide passed tests" checked</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">reorder</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-59" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-59'>#</a>
          </div>
          <p>by default, modify document.title when suite is done</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">altertitle</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-60" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-60'>#</a>
          </div>
          <p>when enabled, all tests must call expect()</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">requireExpects</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-61" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-61'>#</a>
          </div>
          <p>add checkboxes that are persisted in the query-string
when enabled, the id is set to <code>true</code> as a <code>QUnit.config</code> property</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">urlConfig</span><span class="o">:</span> <span class="p">[</span>
		<span class="p">{</span>
			<span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;noglobals&quot;</span><span class="p">,</span>
			<span class="nx">label</span><span class="o">:</span> <span class="s2">&quot;Check for Globals&quot;</span><span class="p">,</span>
			<span class="nx">tooltip</span><span class="o">:</span> <span class="s2">&quot;Enabling this will test if any test introduces new properties on the `window` object. Stored as query-strings.&quot;</span>
		<span class="p">},</span>
		<span class="p">{</span>
			<span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;notrycatch&quot;</span><span class="p">,</span>
			<span class="nx">label</span><span class="o">:</span> <span class="s2">&quot;No try-catch&quot;</span><span class="p">,</span>
			<span class="nx">tooltip</span><span class="o">:</span> <span class="s2">&quot;Enabling this will run tests outside of a try-catch block. Makes debugging exceptions in IE reasonable. Stored as query-strings.&quot;</span>
		<span class="p">}</span>
	<span class="p">],</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-62" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-62'>#</a>
          </div>
          <p>Set of all modules.</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">modules</span><span class="o">:</span> <span class="p">{},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-63" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-63'>#</a>
          </div>
          <p>logging callback queues</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">begin</span><span class="o">:</span> <span class="p">[],</span>
	<span class="nx">done</span><span class="o">:</span> <span class="p">[],</span>
	<span class="nx">log</span><span class="o">:</span> <span class="p">[],</span>
	<span class="nx">testStart</span><span class="o">:</span> <span class="p">[],</span>
	<span class="nx">testDone</span><span class="o">:</span> <span class="p">[],</span>
	<span class="nx">moduleStart</span><span class="o">:</span> <span class="p">[],</span>
	<span class="nx">moduleDone</span><span class="o">:</span> <span class="p">[]</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-64" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-64'>#</a>
          </div>
          <p>Initialize more QUnit.config and QUnit.urlParams</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span>
		<span class="nx">location</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span> <span class="o">||</span> <span class="p">{</span> <span class="nx">search</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nx">protocol</span><span class="o">:</span> <span class="s2">&quot;file:&quot;</span> <span class="p">},</span>
		<span class="nx">params</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="mi">1</span> <span class="p">).</span><span class="nx">split</span><span class="p">(</span> <span class="s2">&quot;&amp;&quot;</span> <span class="p">),</span>
		<span class="nx">length</span> <span class="o">=</span> <span class="nx">params</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
		<span class="nx">urlParams</span> <span class="o">=</span> <span class="p">{},</span>
		<span class="nx">current</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span> <span class="nx">params</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">current</span> <span class="o">=</span> <span class="nx">params</span><span class="p">[</span> <span class="nx">i</span> <span class="p">].</span><span class="nx">split</span><span class="p">(</span> <span class="s2">&quot;=&quot;</span> <span class="p">);</span>
			<span class="nx">current</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">=</span> <span class="nb">decodeURIComponent</span><span class="p">(</span> <span class="nx">current</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-65" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-65'>#</a>
          </div>
          <p>allow just a key to turn on a flag, e.g., test.html?noglobals</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="nx">current</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">current</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">?</span> <span class="nb">decodeURIComponent</span><span class="p">(</span> <span class="nx">current</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="p">)</span> <span class="o">:</span> <span class="kc">true</span><span class="p">;</span>
			<span class="nx">urlParams</span><span class="p">[</span> <span class="nx">current</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">current</span><span class="p">[</span> <span class="mi">1</span> <span class="p">];</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="nx">QUnit</span><span class="p">.</span><span class="nx">urlParams</span> <span class="o">=</span> <span class="nx">urlParams</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-66" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-66'>#</a>
          </div>
          <p>String search anywhere in moduleName+testName</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">config</span><span class="p">.</span><span class="nx">filter</span> <span class="o">=</span> <span class="nx">urlParams</span><span class="p">.</span><span class="nx">filter</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-67" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-67'>#</a>
          </div>
          <p>Exact match of the module name</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">config</span><span class="p">.</span><span class="nx">module</span> <span class="o">=</span> <span class="nx">urlParams</span><span class="p">.</span><span class="nx">module</span><span class="p">;</span>

	<span class="nx">config</span><span class="p">.</span><span class="nx">testNumber</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span> <span class="nx">urlParams</span><span class="p">.</span><span class="nx">testNumber</span><span class="p">,</span> <span class="mi">10</span> <span class="p">)</span> <span class="o">||</span> <span class="kc">null</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-68" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-68'>#</a>
          </div>
          <p>Figure out if we're running the tests from a server or not</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">QUnit</span><span class="p">.</span><span class="nx">isLocal</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">protocol</span> <span class="o">===</span> <span class="s2">&quot;file:&quot;</span><span class="p">;</span>
<span class="p">}());</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-69" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-69'>#</a>
          </div>
          <p>Export global variables, unless an 'exports' object exists,
in that case we assume we're in CommonJS (dealt with on the bottom of the script)</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">exports</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span> <span class="p">)</span> <span class="p">{</span>
	<span class="nx">extend</span><span class="p">(</span> <span class="nb">window</span><span class="p">,</span> <span class="nx">QUnit</span> <span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-70" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-70'>#</a>
          </div>
          <p>Expose QUnit object</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nb">window</span><span class="p">.</span><span class="nx">QUnit</span> <span class="o">=</span> <span class="nx">QUnit</span><span class="p">;</span>
<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-71" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-71'>#</a>
          </div>
          <p>Extend QUnit object,
these after set here because they should not be exposed as global functions</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">extend</span><span class="p">(</span> <span class="nx">QUnit</span><span class="p">,</span> <span class="p">{</span>
	<span class="nx">config</span><span class="o">:</span> <span class="nx">config</span><span class="p">,</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-72" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-72'>#</a>
          </div>
          <p>Initialize the configuration options</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="nx">extend</span><span class="p">(</span> <span class="nx">config</span><span class="p">,</span> <span class="p">{</span>
			<span class="nx">stats</span><span class="o">:</span> <span class="p">{</span> <span class="nx">all</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">bad</span><span class="o">:</span> <span class="mi">0</span> <span class="p">},</span>
			<span class="nx">moduleStats</span><span class="o">:</span> <span class="p">{</span> <span class="nx">all</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">bad</span><span class="o">:</span> <span class="mi">0</span> <span class="p">},</span>
			<span class="nx">started</span><span class="o">:</span> <span class="o">+</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span>
			<span class="nx">updateRate</span><span class="o">:</span> <span class="mi">1000</span><span class="p">,</span>
			<span class="nx">blocking</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
			<span class="nx">autostart</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
			<span class="nx">autorun</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
			<span class="nx">filter</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
			<span class="nx">queue</span><span class="o">:</span> <span class="p">[],</span>
			<span class="nx">semaphore</span><span class="o">:</span> <span class="mi">0</span>
		<span class="p">});</span>

		<span class="kd">var</span> <span class="nx">tests</span><span class="p">,</span> <span class="nx">banner</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span>
			<span class="nx">qunit</span> <span class="o">=</span> <span class="nx">id</span><span class="p">(</span> <span class="s2">&quot;qunit&quot;</span> <span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span> <span class="nx">qunit</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">qunit</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span>
				<span class="s2">&quot;&lt;h1 id=&#39;qunit-header&#39;&gt;&quot;</span> <span class="o">+</span> <span class="nx">escapeInnerText</span><span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">title</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;/h1&gt;&quot;</span> <span class="o">+</span>
				<span class="s2">&quot;&lt;h2 id=&#39;qunit-banner&#39;&gt;&lt;/h2&gt;&quot;</span> <span class="o">+</span>
				<span class="s2">&quot;&lt;div id=&#39;qunit-testrunner-toolbar&#39;&gt;&lt;/div&gt;&quot;</span> <span class="o">+</span>
				<span class="s2">&quot;&lt;h2 id=&#39;qunit-userAgent&#39;&gt;&lt;/h2&gt;&quot;</span> <span class="o">+</span>
				<span class="s2">&quot;&lt;ol id=&#39;qunit-tests&#39;&gt;&lt;/ol&gt;&quot;</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="nx">tests</span> <span class="o">=</span> <span class="nx">id</span><span class="p">(</span> <span class="s2">&quot;qunit-tests&quot;</span> <span class="p">);</span>
		<span class="nx">banner</span> <span class="o">=</span> <span class="nx">id</span><span class="p">(</span> <span class="s2">&quot;qunit-banner&quot;</span> <span class="p">);</span>
		<span class="nx">result</span> <span class="o">=</span> <span class="nx">id</span><span class="p">(</span> <span class="s2">&quot;qunit-testresult&quot;</span> <span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span> <span class="nx">tests</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">tests</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="p">(</span> <span class="nx">banner</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">banner</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="p">(</span> <span class="nx">result</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">result</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">result</span> <span class="p">);</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="p">(</span> <span class="nx">tests</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">result</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;p&quot;</span> <span class="p">);</span>
			<span class="nx">result</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="s2">&quot;qunit-testresult&quot;</span><span class="p">;</span>
			<span class="nx">result</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s2">&quot;result&quot;</span><span class="p">;</span>
			<span class="nx">tests</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">tests</span> <span class="p">);</span>
			<span class="nx">result</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;Running...&lt;br/&gt;&amp;nbsp;&quot;</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-73" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-73'>#</a>
          </div>
          <p>Resets the test setup. Useful for tests that modify the DOM.</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">reset</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">fixture</span> <span class="o">=</span> <span class="nx">id</span><span class="p">(</span> <span class="s2">&quot;qunit-fixture&quot;</span> <span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span> <span class="nx">fixture</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">fixture</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">fixture</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-74" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-74'>#</a>
          </div>
          <p>Trigger an event on an element.
<span class="pydoc pydoc-example"><span>example</span> <code>triggerEvent(</code></span> document.body, "click" );</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">triggerEvent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createEvent</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">event</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createEvent</span><span class="p">(</span> <span class="s2">&quot;MouseEvents&quot;</span> <span class="p">);</span>
			<span class="nx">event</span><span class="p">.</span><span class="nx">initMouseEvent</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">defaultView</span><span class="p">,</span>
				<span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>

			<span class="nx">elem</span><span class="p">.</span><span class="nx">dispatchEvent</span><span class="p">(</span> <span class="nx">event</span> <span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">fireEvent</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">elem</span><span class="p">.</span><span class="nx">fireEvent</span><span class="p">(</span> <span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">type</span> <span class="p">);</span>
		<span class="p">}</span>
	<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-75" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-75'>#</a>
          </div>
          <p>Safe object type checking</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">is</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">return</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">objectType</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="o">==</span> <span class="nx">type</span><span class="p">;</span>
	<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-76" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-76'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">objectType</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">obj</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span> <span class="p">)</span> <span class="p">{</span>
				<span class="k">return</span> <span class="s2">&quot;undefined&quot;</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-77" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-77'>#</a>
          </div>
          <p>consider: typeof null === object</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="p">}</span>
		<span class="k">if</span> <span class="p">(</span> <span class="nx">obj</span> <span class="o">===</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
				<span class="k">return</span> <span class="s2">&quot;null&quot;</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^\[object\s(.*)\]$/</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

		<span class="k">switch</span> <span class="p">(</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">case</span> <span class="s2">&quot;Number&quot;</span><span class="o">:</span>
				<span class="k">if</span> <span class="p">(</span> <span class="nb">isNaN</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
					<span class="k">return</span> <span class="s2">&quot;nan&quot;</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="k">return</span> <span class="s2">&quot;number&quot;</span><span class="p">;</span>
			<span class="k">case</span> <span class="s2">&quot;String&quot;</span><span class="o">:</span>
			<span class="k">case</span> <span class="s2">&quot;Boolean&quot;</span><span class="o">:</span>
			<span class="k">case</span> <span class="s2">&quot;Array&quot;</span><span class="o">:</span>
			<span class="k">case</span> <span class="s2">&quot;Date&quot;</span><span class="o">:</span>
			<span class="k">case</span> <span class="s2">&quot;RegExp&quot;</span><span class="o">:</span>
			<span class="k">case</span> <span class="s2">&quot;Function&quot;</span><span class="o">:</span>
				<span class="k">return</span> <span class="nx">type</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">obj</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">return</span> <span class="s2">&quot;object&quot;</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">return</span> <span class="kc">undefined</span><span class="p">;</span>
	<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-78" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-78'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">push</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">actual</span><span class="p">,</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">message</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">config</span><span class="p">.</span><span class="nx">current</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span> <span class="s2">&quot;assertion outside test context, was &quot;</span> <span class="o">+</span> <span class="nx">sourceFromStacktrace</span><span class="p">()</span> <span class="p">);</span>
		<span class="p">}</span>

		<span class="kd">var</span> <span class="nx">output</span><span class="p">,</span> <span class="nx">source</span><span class="p">,</span>
			<span class="nx">details</span> <span class="o">=</span> <span class="p">{</span>
				<span class="nx">module</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">module</span><span class="p">,</span>
				<span class="nx">name</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">testName</span><span class="p">,</span>
				<span class="nx">result</span><span class="o">:</span> <span class="nx">result</span><span class="p">,</span>
				<span class="nx">message</span><span class="o">:</span> <span class="nx">message</span><span class="p">,</span>
				<span class="nx">actual</span><span class="o">:</span> <span class="nx">actual</span><span class="p">,</span>
				<span class="nx">expected</span><span class="o">:</span> <span class="nx">expected</span>
			<span class="p">};</span>

		<span class="nx">message</span> <span class="o">=</span> <span class="nx">escapeInnerText</span><span class="p">(</span> <span class="nx">message</span> <span class="p">)</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">result</span> <span class="o">?</span> <span class="s2">&quot;okay&quot;</span> <span class="o">:</span> <span class="s2">&quot;failed&quot;</span> <span class="p">);</span>
		<span class="nx">message</span> <span class="o">=</span> <span class="s2">&quot;&lt;span class=&#39;test-message&#39;&gt;&quot;</span> <span class="o">+</span> <span class="nx">message</span> <span class="o">+</span> <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">;</span>
		<span class="nx">output</span> <span class="o">=</span> <span class="nx">message</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">result</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">expected</span> <span class="o">=</span> <span class="nx">escapeInnerText</span><span class="p">(</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">jsDump</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">expected</span><span class="p">)</span> <span class="p">);</span>
			<span class="nx">actual</span> <span class="o">=</span> <span class="nx">escapeInnerText</span><span class="p">(</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">jsDump</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">actual</span><span class="p">)</span> <span class="p">);</span>
			<span class="nx">output</span> <span class="o">+=</span> <span class="s2">&quot;&lt;table&gt;&lt;tr class=&#39;test-expected&#39;&gt;&lt;th&gt;Expected: &lt;/th&gt;&lt;td&gt;&lt;pre&gt;&quot;</span> <span class="o">+</span> <span class="nx">expected</span> <span class="o">+</span> <span class="s2">&quot;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&quot;</span><span class="p">;</span>

			<span class="k">if</span> <span class="p">(</span> <span class="nx">actual</span> <span class="o">!=</span> <span class="nx">expected</span> <span class="p">)</span> <span class="p">{</span>
				<span class="nx">output</span> <span class="o">+=</span> <span class="s2">&quot;&lt;tr class=&#39;test-actual&#39;&gt;&lt;th&gt;Result: &lt;/th&gt;&lt;td&gt;&lt;pre&gt;&quot;</span> <span class="o">+</span> <span class="nx">actual</span> <span class="o">+</span> <span class="s2">&quot;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&quot;</span><span class="p">;</span>
				<span class="nx">output</span> <span class="o">+=</span> <span class="s2">&quot;&lt;tr class=&#39;test-diff&#39;&gt;&lt;th&gt;Diff: &lt;/th&gt;&lt;td&gt;&lt;pre&gt;&quot;</span> <span class="o">+</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">diff</span><span class="p">(</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">actual</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&quot;</span><span class="p">;</span>
			<span class="p">}</span>

			<span class="nx">source</span> <span class="o">=</span> <span class="nx">sourceFromStacktrace</span><span class="p">();</span>

			<span class="k">if</span> <span class="p">(</span> <span class="nx">source</span> <span class="p">)</span> <span class="p">{</span>
				<span class="nx">details</span><span class="p">.</span><span class="nx">source</span> <span class="o">=</span> <span class="nx">source</span><span class="p">;</span>
				<span class="nx">output</span> <span class="o">+=</span> <span class="s2">&quot;&lt;tr class=&#39;test-source&#39;&gt;&lt;th&gt;Source: &lt;/th&gt;&lt;td&gt;&lt;pre&gt;&quot;</span> <span class="o">+</span> <span class="nx">escapeInnerText</span><span class="p">(</span> <span class="nx">source</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&quot;</span><span class="p">;</span>
			<span class="p">}</span>

			<span class="nx">output</span> <span class="o">+=</span> <span class="s2">&quot;&lt;/table&gt;&quot;</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="nx">runLoggingCallbacks</span><span class="p">(</span> <span class="s2">&quot;log&quot;</span><span class="p">,</span> <span class="nx">QUnit</span><span class="p">,</span> <span class="nx">details</span> <span class="p">);</span>

		<span class="nx">config</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">assertions</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
			<span class="nx">result</span><span class="o">:</span> <span class="o">!!</span><span class="nx">result</span><span class="p">,</span>
			<span class="nx">message</span><span class="o">:</span> <span class="nx">output</span>
		<span class="p">});</span>
	<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-79" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-79'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">pushFailure</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">message</span><span class="p">,</span> <span class="nx">source</span><span class="p">,</span> <span class="nx">actual</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">config</span><span class="p">.</span><span class="nx">current</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span> <span class="s2">&quot;pushFailure() assertion outside test context, was &quot;</span> <span class="o">+</span> <span class="nx">sourceFromStacktrace</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="p">);</span>
		<span class="p">}</span>

		<span class="kd">var</span> <span class="nx">output</span><span class="p">,</span>
			<span class="nx">details</span> <span class="o">=</span> <span class="p">{</span>
				<span class="nx">module</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">module</span><span class="p">,</span>
				<span class="nx">name</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">testName</span><span class="p">,</span>
				<span class="nx">result</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
				<span class="nx">message</span><span class="o">:</span> <span class="nx">message</span>
			<span class="p">};</span>

		<span class="nx">message</span> <span class="o">=</span> <span class="nx">escapeInnerText</span><span class="p">(</span> <span class="nx">message</span> <span class="p">)</span> <span class="o">||</span> <span class="s2">&quot;error&quot;</span><span class="p">;</span>
		<span class="nx">message</span> <span class="o">=</span> <span class="s2">&quot;&lt;span class=&#39;test-message&#39;&gt;&quot;</span> <span class="o">+</span> <span class="nx">message</span> <span class="o">+</span> <span class="s2">&quot;&lt;/span&gt;&quot;</span><span class="p">;</span>
		<span class="nx">output</span> <span class="o">=</span> <span class="nx">message</span><span class="p">;</span>

		<span class="nx">output</span> <span class="o">+=</span> <span class="s2">&quot;&lt;table&gt;&quot;</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span> <span class="nx">actual</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">output</span> <span class="o">+=</span> <span class="s2">&quot;&lt;tr class=&#39;test-actual&#39;&gt;&lt;th&gt;Result: &lt;/th&gt;&lt;td&gt;&lt;pre&gt;&quot;</span> <span class="o">+</span> <span class="nx">escapeInnerText</span><span class="p">(</span> <span class="nx">actual</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&quot;</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="p">(</span> <span class="nx">source</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">details</span><span class="p">.</span><span class="nx">source</span> <span class="o">=</span> <span class="nx">source</span><span class="p">;</span>
			<span class="nx">output</span> <span class="o">+=</span> <span class="s2">&quot;&lt;tr class=&#39;test-source&#39;&gt;&lt;th&gt;Source: &lt;/th&gt;&lt;td&gt;&lt;pre&gt;&quot;</span> <span class="o">+</span> <span class="nx">escapeInnerText</span><span class="p">(</span> <span class="nx">source</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&quot;</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="nx">output</span> <span class="o">+=</span> <span class="s2">&quot;&lt;/table&gt;&quot;</span><span class="p">;</span>

		<span class="nx">runLoggingCallbacks</span><span class="p">(</span> <span class="s2">&quot;log&quot;</span><span class="p">,</span> <span class="nx">QUnit</span><span class="p">,</span> <span class="nx">details</span> <span class="p">);</span>

		<span class="nx">config</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">assertions</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
			<span class="nx">result</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
			<span class="nx">message</span><span class="o">:</span> <span class="nx">output</span>
		<span class="p">});</span>
	<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-80" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-80'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">url</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">params</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">params</span> <span class="o">=</span> <span class="nx">extend</span><span class="p">(</span> <span class="nx">extend</span><span class="p">(</span> <span class="p">{},</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">urlParams</span> <span class="p">),</span> <span class="nx">params</span> <span class="p">);</span>
		<span class="kd">var</span> <span class="nx">key</span><span class="p">,</span>
			<span class="nx">querystring</span> <span class="o">=</span> <span class="s2">&quot;?&quot;</span><span class="p">;</span>

		<span class="k">for</span> <span class="p">(</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">params</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">hasOwn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">params</span><span class="p">,</span> <span class="nx">key</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
				<span class="k">continue</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="nx">querystring</span> <span class="o">+=</span> <span class="nb">encodeURIComponent</span><span class="p">(</span> <span class="nx">key</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">+</span>
				<span class="nb">encodeURIComponent</span><span class="p">(</span> <span class="nx">params</span><span class="p">[</span> <span class="nx">key</span> <span class="p">]</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&amp;&quot;</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">return</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">pathname</span> <span class="o">+</span> <span class="nx">querystring</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span> <span class="p">);</span>
	<span class="p">},</span>

	<span class="nx">extend</span><span class="o">:</span> <span class="nx">extend</span><span class="p">,</span>
	<span class="nx">id</span><span class="o">:</span> <span class="nx">id</span><span class="p">,</span>
	<span class="nx">addEvent</span><span class="o">:</span> <span class="nx">addEvent</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-81" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-81'>#</a>
          </div>
          <p>load, equiv, jsDump, diff: Attached later</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="p">});</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-82" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-82'>#</a>
          </div>
          <p><span class="pydoc pydoc-deprecated"><span>deprecated</span></span>: Created for backwards compatibility with test runner that set the hook function
 into QUnit.{hook}, instead of invoking it and passing the hook function.
 QUnit.constructor is set to the empty F() above so that we can add to it's prototype here.
 Doing this allows us to tell if the following methods have been overwritten on the actual
 QUnit object.</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">extend</span><span class="p">(</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-83" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-83'>#</a>
          </div>
          <p>Logging callbacks; all receive a single argument with the listed properties
run test/logs.html for any related changes</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">begin</span><span class="o">:</span> <span class="nx">registerLoggingCallback</span><span class="p">(</span> <span class="s2">&quot;begin&quot;</span> <span class="p">),</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-84" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-84'>#</a>
          </div>
          <p>done: { failed, passed, total, runtime }</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">done</span><span class="o">:</span> <span class="nx">registerLoggingCallback</span><span class="p">(</span> <span class="s2">&quot;done&quot;</span> <span class="p">),</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-85" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-85'>#</a>
          </div>
          <p>log: { result, actual, expected, message }</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">log</span><span class="o">:</span> <span class="nx">registerLoggingCallback</span><span class="p">(</span> <span class="s2">&quot;log&quot;</span> <span class="p">),</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-86" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-86'>#</a>
          </div>
          <p>testStart: { name }</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">testStart</span><span class="o">:</span> <span class="nx">registerLoggingCallback</span><span class="p">(</span> <span class="s2">&quot;testStart&quot;</span> <span class="p">),</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-87" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-87'>#</a>
          </div>
          <p>testDone: { name, failed, passed, total }</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">testDone</span><span class="o">:</span> <span class="nx">registerLoggingCallback</span><span class="p">(</span> <span class="s2">&quot;testDone&quot;</span> <span class="p">),</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-88" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-88'>#</a>
          </div>
          <p>moduleStart: { name }</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">moduleStart</span><span class="o">:</span> <span class="nx">registerLoggingCallback</span><span class="p">(</span> <span class="s2">&quot;moduleStart&quot;</span> <span class="p">),</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-89" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-89'>#</a>
          </div>
          <p>moduleDone: { name, failed, passed, total }</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">moduleDone</span><span class="o">:</span> <span class="nx">registerLoggingCallback</span><span class="p">(</span> <span class="s2">&quot;moduleDone&quot;</span> <span class="p">)</span>
<span class="p">});</span>

<span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nb">document</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="s2">&quot;complete&quot;</span> <span class="p">)</span> <span class="p">{</span>
	<span class="nx">config</span><span class="p">.</span><span class="nx">autorun</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-90" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-90'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">QUnit</span><span class="p">.</span><span class="nx">load</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">runLoggingCallbacks</span><span class="p">(</span> <span class="s2">&quot;begin&quot;</span><span class="p">,</span> <span class="nx">QUnit</span><span class="p">,</span> <span class="p">{}</span> <span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-91" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-91'>#</a>
          </div>
          <p>Initialize the config, saving the execution queue</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="kd">var</span> <span class="nx">banner</span><span class="p">,</span> <span class="nx">filter</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">label</span><span class="p">,</span> <span class="nx">len</span><span class="p">,</span> <span class="nx">main</span><span class="p">,</span> <span class="nx">ol</span><span class="p">,</span> <span class="nx">toolbar</span><span class="p">,</span> <span class="nx">userAgent</span><span class="p">,</span> <span class="nx">val</span><span class="p">,</span> <span class="nx">urlConfigCheckboxes</span><span class="p">,</span> <span class="nx">moduleFilter</span><span class="p">,</span>
	    <span class="nx">numModules</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
	    <span class="nx">moduleFilterHtml</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
		<span class="nx">urlConfigHtml</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
		<span class="nx">oldconfig</span> <span class="o">=</span> <span class="nx">extend</span><span class="p">(</span> <span class="p">{},</span> <span class="nx">config</span> <span class="p">);</span>

	<span class="nx">QUnit</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>
	<span class="nx">extend</span><span class="p">(</span><span class="nx">config</span><span class="p">,</span> <span class="nx">oldconfig</span><span class="p">);</span>

	<span class="nx">config</span><span class="p">.</span><span class="nx">blocking</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

	<span class="nx">len</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">urlConfig</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">val</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">urlConfig</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
		<span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">val</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">val</span> <span class="o">=</span> <span class="p">{</span>
				<span class="nx">id</span><span class="o">:</span> <span class="nx">val</span><span class="p">,</span>
				<span class="nx">label</span><span class="o">:</span> <span class="nx">val</span><span class="p">,</span>
				<span class="nx">tooltip</span><span class="o">:</span> <span class="s2">&quot;[no tooltip available]&quot;</span>
			<span class="p">};</span>
		<span class="p">}</span>
		<span class="nx">config</span><span class="p">[</span> <span class="nx">val</span><span class="p">.</span><span class="nx">id</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">urlParams</span><span class="p">[</span> <span class="nx">val</span><span class="p">.</span><span class="nx">id</span> <span class="p">];</span>
		<span class="nx">urlConfigHtml</span> <span class="o">+=</span> <span class="s2">&quot;&lt;input id=&#39;qunit-urlconfig-&quot;</span> <span class="o">+</span> <span class="nx">val</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s2">&quot;&#39; name=&#39;&quot;</span> <span class="o">+</span> <span class="nx">val</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s2">&quot;&#39; type=&#39;checkbox&#39;&quot;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">config</span><span class="p">[</span> <span class="nx">val</span><span class="p">.</span><span class="nx">id</span> <span class="p">]</span> <span class="o">?</span> <span class="s2">&quot; checked=&#39;checked&#39;&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; title=&#39;&quot;</span> <span class="o">+</span> <span class="nx">val</span><span class="p">.</span><span class="nx">tooltip</span> <span class="o">+</span> <span class="s2">&quot;&#39;&gt;&lt;label for=&#39;qunit-urlconfig-&quot;</span> <span class="o">+</span> <span class="nx">val</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s2">&quot;&#39; title=&#39;&quot;</span> <span class="o">+</span> <span class="nx">val</span><span class="p">.</span><span class="nx">tooltip</span> <span class="o">+</span> <span class="s2">&quot;&#39;&gt;&quot;</span> <span class="o">+</span> <span class="nx">val</span><span class="p">.</span><span class="nx">label</span> <span class="o">+</span> <span class="s2">&quot;&lt;/label&gt;&quot;</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="nx">moduleFilterHtml</span> <span class="o">+=</span> <span class="s2">&quot;&lt;label for=&#39;qunit-modulefilter&#39;&gt;Module: &lt;/label&gt;&lt;select id=&#39;qunit-modulefilter&#39; name=&#39;modulefilter&#39;&gt;&lt;option value=&#39;&#39; &quot;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">module</span> <span class="o">===</span> <span class="kc">undefined</span>  <span class="o">?</span> <span class="s2">&quot;selected&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&gt;&lt; All Modules &gt;&lt;/option&gt;&quot;</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">config</span><span class="p">.</span><span class="nx">modules</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">modules</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">numModules</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
			<span class="nx">moduleFilterHtml</span> <span class="o">+=</span> <span class="s2">&quot;&lt;option value=&#39;&quot;</span> <span class="o">+</span> <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&#39; &quot;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">module</span> <span class="o">===</span> <span class="nx">i</span> <span class="o">?</span> <span class="s2">&quot;selected&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&gt;&quot;</span> <span class="o">+</span> <span class="nx">i</span> <span class="o">+</span> <span class="s2">&quot;&lt;/option&gt;&quot;</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="nx">moduleFilterHtml</span> <span class="o">+=</span> <span class="s2">&quot;&lt;/select&gt;&quot;</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-92" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-92'>#</a>
          </div>
          <p><code>userAgent</code> initialized at top of scope</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">userAgent</span> <span class="o">=</span> <span class="nx">id</span><span class="p">(</span> <span class="s2">&quot;qunit-userAgent&quot;</span> <span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span> <span class="nx">userAgent</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">userAgent</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">;</span>
	<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-93" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-93'>#</a>
          </div>
          <p><code>banner</code> initialized at top of scope</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">banner</span> <span class="o">=</span> <span class="nx">id</span><span class="p">(</span> <span class="s2">&quot;qunit-header&quot;</span> <span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span> <span class="nx">banner</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">banner</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&lt;a href=&#39;&quot;</span> <span class="o">+</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">url</span><span class="p">({</span> <span class="nx">filter</span><span class="o">:</span> <span class="kc">undefined</span><span class="p">,</span> <span class="nx">module</span><span class="o">:</span> <span class="kc">undefined</span><span class="p">,</span> <span class="nx">testNumber</span><span class="o">:</span> <span class="kc">undefined</span> <span class="p">})</span> <span class="o">+</span> <span class="s2">&quot;&#39;&gt;&quot;</span> <span class="o">+</span> <span class="nx">banner</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">+</span> <span class="s2">&quot;&lt;/a&gt; &quot;</span><span class="p">;</span>
	<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-94" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-94'>#</a>
          </div>
          <p><code>toolbar</code> initialized at top of scope</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">toolbar</span> <span class="o">=</span> <span class="nx">id</span><span class="p">(</span> <span class="s2">&quot;qunit-testrunner-toolbar&quot;</span> <span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span> <span class="nx">toolbar</span> <span class="p">)</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-95" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-95'>#</a>
          </div>
          <p><code>filter</code> initialized at top of scope</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="nx">filter</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;input&quot;</span> <span class="p">);</span>
		<span class="nx">filter</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;checkbox&quot;</span><span class="p">;</span>
		<span class="nx">filter</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="s2">&quot;qunit-filter-pass&quot;</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-96" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-96'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="nx">addEvent</span><span class="p">(</span> <span class="nx">filter</span><span class="p">,</span> <span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">tmp</span><span class="p">,</span>
				<span class="nx">ol</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span> <span class="s2">&quot;qunit-tests&quot;</span> <span class="p">);</span>

			<span class="k">if</span> <span class="p">(</span> <span class="nx">filter</span><span class="p">.</span><span class="nx">checked</span> <span class="p">)</span> <span class="p">{</span>
				<span class="nx">ol</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">className</span> <span class="o">+</span> <span class="s2">&quot; hidepass&quot;</span><span class="p">;</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="nx">tmp</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">className</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="sr">/[\n\t\r]/g</span><span class="p">,</span> <span class="s2">&quot; &quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>
				<span class="nx">ol</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">tmp</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="sr">/ hidepass /</span><span class="p">,</span> <span class="s2">&quot; &quot;</span> <span class="p">);</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">(</span> <span class="nx">defined</span><span class="p">.</span><span class="nx">sessionStorage</span> <span class="p">)</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="nx">filter</span><span class="p">.</span><span class="nx">checked</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span> <span class="s2">&quot;qunit-filter-passed-tests&quot;</span><span class="p">,</span> <span class="s2">&quot;true&quot;</span> <span class="p">);</span>
				<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
					<span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span> <span class="s2">&quot;qunit-filter-passed-tests&quot;</span> <span class="p">);</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="p">});</span>

		<span class="k">if</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">hidepassed</span> <span class="o">||</span> <span class="nx">defined</span><span class="p">.</span><span class="nx">sessionStorage</span> <span class="o">&amp;&amp;</span> <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span> <span class="s2">&quot;qunit-filter-passed-tests&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">filter</span><span class="p">.</span><span class="nx">checked</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-97" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-97'>#</a>
          </div>
          <p><code>ol</code> initialized at top of scope</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="nx">ol</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span> <span class="s2">&quot;qunit-tests&quot;</span> <span class="p">);</span>
			<span class="nx">ol</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">ol</span><span class="p">.</span><span class="nx">className</span> <span class="o">+</span> <span class="s2">&quot; hidepass&quot;</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="nx">toolbar</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">filter</span> <span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-98" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-98'>#</a>
          </div>
          <p><code>label</code> initialized at top of scope</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="nx">label</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;label&quot;</span> <span class="p">);</span>
		<span class="nx">label</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="s2">&quot;for&quot;</span><span class="p">,</span> <span class="s2">&quot;qunit-filter-pass&quot;</span> <span class="p">);</span>
		<span class="nx">label</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;Only show tests and assertons that fail. Stored in sessionStorage.&quot;</span> <span class="p">);</span>
		<span class="nx">label</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;Hide passed tests&quot;</span><span class="p">;</span>
		<span class="nx">toolbar</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">label</span> <span class="p">);</span>

		<span class="nx">urlConfigCheckboxes</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s1">&#39;span&#39;</span> <span class="p">);</span>
		<span class="nx">urlConfigCheckboxes</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">urlConfigHtml</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-99" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-99'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="nx">addEvent</span><span class="p">(</span> <span class="nx">urlConfigCheckboxes</span><span class="p">,</span> <span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{};</span>
			<span class="nx">params</span><span class="p">[</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">checked</span> <span class="o">?</span> <span class="kc">true</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">;</span>
			<span class="nb">window</span><span class="p">.</span><span class="nx">location</span> <span class="o">=</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">url</span><span class="p">(</span> <span class="nx">params</span> <span class="p">);</span>
		<span class="p">});</span>
		<span class="nx">toolbar</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">urlConfigCheckboxes</span> <span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span><span class="nx">numModules</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">moduleFilter</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s1">&#39;span&#39;</span> <span class="p">);</span>
			<span class="nx">moduleFilter</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;qunit-modulefilter-container&#39;</span> <span class="p">);</span>
			<span class="nx">moduleFilter</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">moduleFilterHtml</span><span class="p">;</span>

			<span class="nx">addEvent</span><span class="p">(</span> <span class="nx">moduleFilter</span><span class="p">,</span> <span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">selectBox</span> <span class="o">=</span> <span class="nx">moduleFilter</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;select&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
				    <span class="nx">selectedModule</span> <span class="o">=</span> <span class="nb">decodeURIComponent</span><span class="p">(</span><span class="nx">selectBox</span><span class="p">.</span><span class="nx">options</span><span class="p">[</span><span class="nx">selectBox</span><span class="p">.</span><span class="nx">selectedIndex</span><span class="p">].</span><span class="nx">value</span><span class="p">);</span>

				<span class="nb">window</span><span class="p">.</span><span class="nx">location</span> <span class="o">=</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">url</span><span class="p">(</span> <span class="p">{</span> <span class="nx">module</span><span class="o">:</span> <span class="p">(</span> <span class="nx">selectedModule</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">?</span> <span class="kc">undefined</span> <span class="o">:</span> <span class="nx">selectedModule</span> <span class="p">}</span> <span class="p">);</span>
			<span class="p">});</span>
			<span class="nx">toolbar</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">moduleFilter</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-100" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-100'>#</a>
          </div>
          <p><code>main</code> initialized at top of scope</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">main</span> <span class="o">=</span> <span class="nx">id</span><span class="p">(</span> <span class="s2">&quot;qunit-fixture&quot;</span> <span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span> <span class="nx">main</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">config</span><span class="p">.</span><span class="nx">fixture</span> <span class="o">=</span> <span class="nx">main</span><span class="p">.</span><span class="nx">innerHTML</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">autostart</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">QUnit</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
	<span class="p">}</span>
<span class="p">};</span>

<span class="nx">addEvent</span><span class="p">(</span> <span class="nb">window</span><span class="p">,</span> <span class="s2">&quot;load&quot;</span><span class="p">,</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">load</span> <span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-101" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-101'>#</a>
          </div>
          <p><code>onErrorFnPrev</code> initialized at top of scope
Preserve other handlers</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">onErrorFnPrev</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">onerror</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-102" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-102'>#</a>
          </div>
          <p>Cover uncaught exceptions
Returning true will surpress the default browser handler,
returning false will let it run.</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nb">window</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">error</span><span class="p">,</span> <span class="nx">filePath</span><span class="p">,</span> <span class="nx">linerNr</span> <span class="p">)</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span> <span class="nx">onErrorFnPrev</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">ret</span> <span class="o">=</span> <span class="nx">onErrorFnPrev</span><span class="p">(</span> <span class="nx">error</span><span class="p">,</span> <span class="nx">filePath</span><span class="p">,</span> <span class="nx">linerNr</span> <span class="p">);</span>
	<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-103" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-103'>#</a>
          </div>
          <p>Treat return value as window.onerror itself does,
Only do our handling if not surpressed.</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">!==</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">current</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">ignoreGlobalErrors</span> <span class="p">)</span> <span class="p">{</span>
				<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="nx">QUnit</span><span class="p">.</span><span class="nx">pushFailure</span><span class="p">(</span> <span class="nx">error</span><span class="p">,</span> <span class="nx">filePath</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="nx">linerNr</span> <span class="p">);</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

			<span class="nx">QUnit</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="s2">&quot;global failure&quot;</span><span class="p">,</span> <span class="nx">extend</span><span class="p">(</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="nx">QUnit</span><span class="p">.</span><span class="nx">pushFailure</span><span class="p">(</span> <span class="nx">error</span><span class="p">,</span> <span class="nx">filePath</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="nx">linerNr</span> <span class="p">);</span>
			<span class="p">},</span> <span class="p">{</span> <span class="nx">validTest</span><span class="o">:</span> <span class="nx">validTest</span> <span class="p">}</span> <span class="p">)</span> <span class="p">);</span>
		<span class="p">}</span>
		<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">function</span> <span class="nx">done</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">config</span><span class="p">.</span><span class="nx">autorun</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-104" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-104'>#</a>
          </div>
          <p>Log the last module results</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="k">if</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">currentModule</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">runLoggingCallbacks</span><span class="p">(</span> <span class="s2">&quot;moduleDone&quot;</span><span class="p">,</span> <span class="nx">QUnit</span><span class="p">,</span> <span class="p">{</span>
			<span class="nx">name</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">currentModule</span><span class="p">,</span>
			<span class="nx">failed</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">moduleStats</span><span class="p">.</span><span class="nx">bad</span><span class="p">,</span>
			<span class="nx">passed</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">moduleStats</span><span class="p">.</span><span class="nx">all</span> <span class="o">-</span> <span class="nx">config</span><span class="p">.</span><span class="nx">moduleStats</span><span class="p">.</span><span class="nx">bad</span><span class="p">,</span>
			<span class="nx">total</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">moduleStats</span><span class="p">.</span><span class="nx">all</span>
		<span class="p">});</span>
	<span class="p">}</span>

	<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span>
		<span class="nx">banner</span> <span class="o">=</span> <span class="nx">id</span><span class="p">(</span> <span class="s2">&quot;qunit-banner&quot;</span> <span class="p">),</span>
		<span class="nx">tests</span> <span class="o">=</span> <span class="nx">id</span><span class="p">(</span> <span class="s2">&quot;qunit-tests&quot;</span> <span class="p">),</span>
		<span class="nx">runtime</span> <span class="o">=</span> <span class="o">+</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()</span> <span class="o">-</span> <span class="nx">config</span><span class="p">.</span><span class="nx">started</span><span class="p">,</span>
		<span class="nx">passed</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">stats</span><span class="p">.</span><span class="nx">all</span> <span class="o">-</span> <span class="nx">config</span><span class="p">.</span><span class="nx">stats</span><span class="p">.</span><span class="nx">bad</span><span class="p">,</span>
		<span class="nx">html</span> <span class="o">=</span> <span class="p">[</span>
			<span class="s2">&quot;Tests completed in &quot;</span><span class="p">,</span>
			<span class="nx">runtime</span><span class="p">,</span>
			<span class="s2">&quot; milliseconds.&lt;br/&gt;&quot;</span><span class="p">,</span>
			<span class="s2">&quot;&lt;span class=&#39;passed&#39;&gt;&quot;</span><span class="p">,</span>
			<span class="nx">passed</span><span class="p">,</span>
			<span class="s2">&quot;&lt;/span&gt; tests of &lt;span class=&#39;total&#39;&gt;&quot;</span><span class="p">,</span>
			<span class="nx">config</span><span class="p">.</span><span class="nx">stats</span><span class="p">.</span><span class="nx">all</span><span class="p">,</span>
			<span class="s2">&quot;&lt;/span&gt; passed, &lt;span class=&#39;failed&#39;&gt;&quot;</span><span class="p">,</span>
			<span class="nx">config</span><span class="p">.</span><span class="nx">stats</span><span class="p">.</span><span class="nx">bad</span><span class="p">,</span>
			<span class="s2">&quot;&lt;/span&gt; failed.&quot;</span>
		<span class="p">].</span><span class="nx">join</span><span class="p">(</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span> <span class="nx">banner</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">banner</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">stats</span><span class="p">.</span><span class="nx">bad</span> <span class="o">?</span> <span class="s2">&quot;qunit-fail&quot;</span> <span class="o">:</span> <span class="s2">&quot;qunit-pass&quot;</span> <span class="p">);</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span> <span class="nx">tests</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">id</span><span class="p">(</span> <span class="s2">&quot;qunit-testresult&quot;</span> <span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">html</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">altertitle</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nb">document</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">title</span> <span class="p">)</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-105" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-105'>#</a>
          </div>
          <p>show ✖ for good, ✔ for bad suite result in title
use escape sequences in case file gets loaded with non-utf-8-charset</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="nb">document</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="p">[</span>
			<span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">stats</span><span class="p">.</span><span class="nx">bad</span> <span class="o">?</span> <span class="s2">&quot;\u2716&quot;</span> <span class="o">:</span> <span class="s2">&quot;\u2714&quot;</span> <span class="p">),</span>
			<span class="nb">document</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="sr">/^[\u2714\u2716] /i</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span>
		<span class="p">].</span><span class="nx">join</span><span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="p">);</span>
	<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-106" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-106'>#</a>
          </div>
          <p>clear own sessionStorage items if all tests passed</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="k">if</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">reorder</span> <span class="o">&amp;&amp;</span> <span class="nx">defined</span><span class="p">.</span><span class="nx">sessionStorage</span> <span class="o">&amp;&amp;</span> <span class="nx">config</span><span class="p">.</span><span class="nx">stats</span><span class="p">.</span><span class="nx">bad</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-107" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-107'>#</a>
          </div>
          <p><code>key</code> &amp; <code>i</code> initialized at top of scope</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">key</span> <span class="o">=</span> <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">key</span><span class="p">(</span> <span class="nx">i</span><span class="o">++</span> <span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span> <span class="nx">key</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span> <span class="s2">&quot;qunit-test-&quot;</span> <span class="p">)</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
				<span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span> <span class="nx">key</span> <span class="p">);</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-108" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-108'>#</a>
          </div>
          <p>scroll back to top to show results</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="k">if</span> <span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="nx">runLoggingCallbacks</span><span class="p">(</span> <span class="s2">&quot;done&quot;</span><span class="p">,</span> <span class="nx">QUnit</span><span class="p">,</span> <span class="p">{</span>
		<span class="nx">failed</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">stats</span><span class="p">.</span><span class="nx">bad</span><span class="p">,</span>
		<span class="nx">passed</span><span class="o">:</span> <span class="nx">passed</span><span class="p">,</span>
		<span class="nx">total</span><span class="o">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">stats</span><span class="p">.</span><span class="nx">all</span><span class="p">,</span>
		<span class="nx">runtime</span><span class="o">:</span> <span class="nx">runtime</span>
	<span class="p">});</span>
<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-109" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-109'>#</a>
          </div>
          <p><span class="pydoc pydoc-return"><span>return</span> <code>Boolean:</code></span> true if this test should be ran </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="kd">function</span> <span class="nx">validTest</span><span class="p">(</span> <span class="nx">test</span> <span class="p">)</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">include</span><span class="p">,</span>
		<span class="nx">filter</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">filter</span> <span class="o">&amp;&amp;</span> <span class="nx">config</span><span class="p">.</span><span class="nx">filter</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">(),</span>
		<span class="nx">module</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">module</span> <span class="o">&amp;&amp;</span> <span class="nx">config</span><span class="p">.</span><span class="nx">module</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">(),</span>
		<span class="nx">fullName</span> <span class="o">=</span> <span class="p">(</span><span class="nx">test</span><span class="p">.</span><span class="nx">module</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="nx">test</span><span class="p">.</span><span class="nx">testName</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">();</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-110" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-110'>#</a>
          </div>
          <p>Internally-generated tests are always valid</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="k">if</span> <span class="p">(</span> <span class="nx">test</span><span class="p">.</span><span class="nx">callback</span> <span class="o">&amp;&amp;</span> <span class="nx">test</span><span class="p">.</span><span class="nx">callback</span><span class="p">.</span><span class="nx">validTest</span> <span class="o">===</span> <span class="nx">validTest</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">delete</span> <span class="nx">test</span><span class="p">.</span><span class="nx">callback</span><span class="p">.</span><span class="nx">validTest</span><span class="p">;</span>
		<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">testNumber</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">return</span> <span class="nx">test</span><span class="p">.</span><span class="nx">testNumber</span> <span class="o">===</span> <span class="nx">config</span><span class="p">.</span><span class="nx">testNumber</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span> <span class="nx">module</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="o">!</span><span class="nx">test</span><span class="p">.</span><span class="nx">module</span> <span class="o">||</span> <span class="nx">test</span><span class="p">.</span><span class="nx">module</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">!==</span> <span class="nx">module</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">filter</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="nx">include</span> <span class="o">=</span> <span class="nx">filter</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">!==</span> <span class="s2">&quot;!&quot;</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">include</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">filter</span> <span class="o">=</span> <span class="nx">filter</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="mi">1</span> <span class="p">);</span>
	<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-111" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-111'>#</a>
          </div>
          <p>If the filter matches, we need to honour include</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="k">if</span> <span class="p">(</span> <span class="nx">fullName</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span> <span class="nx">filter</span> <span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">return</span> <span class="nx">include</span><span class="p">;</span>
	<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-112" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-112'>#</a>
          </div>
          <p>Otherwise, do the opposite</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="k">return</span> <span class="o">!</span><span class="nx">include</span><span class="p">;</span>
<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-113" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-113'>#</a>
          </div>
          <p>so far supports only Firefox, Chrome and Opera (buggy), Safari (for real exceptions)
Later Safari and IE10 are supposed to support error.stack as well
See also <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Error/Stack">https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Error/Stack</a></p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="kd">function</span> <span class="nx">extractStacktrace</span><span class="p">(</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">offset</span> <span class="p">)</span> <span class="p">{</span>
	<span class="nx">offset</span> <span class="o">=</span> <span class="nx">offset</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">?</span> <span class="mi">3</span> <span class="o">:</span> <span class="nx">offset</span><span class="p">;</span>

	<span class="kd">var</span> <span class="nx">stack</span><span class="p">,</span> <span class="nx">include</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">regex</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span> <span class="nx">e</span><span class="p">.</span><span class="nx">stacktrace</span> <span class="p">)</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-114" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-114'>#</a>
          </div>
          <p>Opera</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="k">return</span> <span class="nx">e</span><span class="p">.</span><span class="nx">stacktrace</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span> <span class="s2">&quot;\n&quot;</span> <span class="p">)[</span> <span class="nx">offset</span> <span class="o">+</span> <span class="mi">3</span> <span class="p">];</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">e</span><span class="p">.</span><span class="nx">stack</span> <span class="p">)</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-115" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-115'>#</a>
          </div>
          <p>Firefox, Chrome</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="nx">stack</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">stack</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span> <span class="s2">&quot;\n&quot;</span> <span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="sr">/^error$/i</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">stack</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">stack</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">(</span> <span class="nx">fileName</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">include</span> <span class="o">=</span> <span class="p">[];</span>
			<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">offset</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">stack</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span> <span class="nx">stack</span><span class="p">[</span> <span class="nx">i</span> <span class="p">].</span><span class="nx">indexOf</span><span class="p">(</span> <span class="nx">fileName</span> <span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
					<span class="k">break</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="nx">include</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">stack</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">);</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">(</span> <span class="nx">include</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
				<span class="k">return</span> <span class="nx">include</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span> <span class="s2">&quot;\n&quot;</span> <span class="p">);</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="k">return</span> <span class="nx">stack</span><span class="p">[</span> <span class="nx">offset</span> <span class="p">];</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">e</span><span class="p">.</span><span class="nx">sourceURL</span> <span class="p">)</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-116" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-116'>#</a>
          </div>
          <p>Safari, PhantomJS
hopefully one day Safari provides actual stacktraces
exclude useless self-reference for generated Error objects</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="k">if</span> <span class="p">(</span> <span class="sr">/qunit.js$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">e</span><span class="p">.</span><span class="nx">sourceURL</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">return</span><span class="p">;</span>
		<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-117" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-117'>#</a>
          </div>
          <p>for actual exceptions, this is useful</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="k">return</span> <span class="nx">e</span><span class="p">.</span><span class="nx">sourceURL</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="nx">e</span><span class="p">.</span><span class="nx">line</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">sourceFromStacktrace</span><span class="p">(</span> <span class="nx">offset</span> <span class="p">)</span> <span class="p">{</span>
	<span class="k">try</span> <span class="p">{</span>
		<span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">();</span>
	<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">return</span> <span class="nx">extractStacktrace</span><span class="p">(</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">offset</span> <span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">escapeInnerText</span><span class="p">(</span> <span class="nx">s</span> <span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">s</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="nx">s</span> <span class="o">=</span> <span class="nx">s</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-118" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-118'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="k">return</span> <span class="nx">s</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="sr">/[\&amp;&lt;&gt;]/g</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">s</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">switch</span><span class="p">(</span> <span class="nx">s</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">case</span> <span class="s2">&quot;&amp;&quot;</span><span class="o">:</span> <span class="k">return</span> <span class="s2">&quot;&amp;amp;&quot;</span><span class="p">;</span>
			<span class="k">case</span> <span class="s2">&quot;&lt;&quot;</span><span class="o">:</span> <span class="k">return</span> <span class="s2">&quot;&amp;lt;&quot;</span><span class="p">;</span>
			<span class="k">case</span> <span class="s2">&quot;&gt;&quot;</span><span class="o">:</span> <span class="k">return</span> <span class="s2">&quot;&amp;gt;&quot;</span><span class="p">;</span>
			<span class="k">default</span><span class="o">:</span> <span class="k">return</span> <span class="nx">s</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">});</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">synchronize</span><span class="p">(</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">last</span> <span class="p">)</span> <span class="p">{</span>
	<span class="nx">config</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">callback</span> <span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">autorun</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">config</span><span class="p">.</span><span class="nx">blocking</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">process</span><span class="p">(</span> <span class="nx">last</span> <span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">process</span><span class="p">(</span> <span class="nx">last</span> <span class="p">)</span> <span class="p">{</span>
	<span class="kd">function</span> <span class="nx">next</span><span class="p">()</span> <span class="p">{</span>
		<span class="nx">process</span><span class="p">(</span> <span class="nx">last</span> <span class="p">);</span>
	<span class="p">}</span>
	<span class="kd">var</span> <span class="nx">start</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
	<span class="nx">config</span><span class="p">.</span><span class="nx">depth</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">depth</span> <span class="o">?</span> <span class="nx">config</span><span class="p">.</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>

	<span class="k">while</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">config</span><span class="p">.</span><span class="nx">blocking</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">defined</span><span class="p">.</span><span class="nx">setTimeout</span> <span class="o">||</span> <span class="nx">config</span><span class="p">.</span><span class="nx">updateRate</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">||</span> <span class="p">(</span> <span class="p">(</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">-</span> <span class="nx">start</span> <span class="p">)</span> <span class="o">&lt;</span> <span class="nx">config</span><span class="p">.</span><span class="nx">updateRate</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">config</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">shift</span><span class="p">()();</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span> <span class="nx">next</span><span class="p">,</span> <span class="mi">13</span> <span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="nx">config</span><span class="p">.</span><span class="nx">depth</span><span class="o">--</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span> <span class="nx">last</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">config</span><span class="p">.</span><span class="nx">blocking</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">config</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">config</span><span class="p">.</span><span class="nx">depth</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">done</span><span class="p">();</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">saveGlobal</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">config</span><span class="p">.</span><span class="nx">pollution</span> <span class="o">=</span> <span class="p">[];</span>

	<span class="k">if</span> <span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">noglobals</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nb">window</span> <span class="p">)</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-119" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-119'>#</a>
          </div>
          <p>in Opera sometimes DOM element ids show up here, ignore them</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">hasOwn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nb">window</span><span class="p">,</span> <span class="nx">key</span> <span class="p">)</span> <span class="o">||</span> <span class="sr">/^qunit-test-output/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">key</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
				<span class="k">continue</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="nx">config</span><span class="p">.</span><span class="nx">pollution</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">key</span> <span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">checkPollution</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">newGlobals</span><span class="p">,</span>
		<span class="nx">deletedGlobals</span><span class="p">,</span>
		<span class="nx">old</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">pollution</span><span class="p">;</span>

	<span class="nx">saveGlobal</span><span class="p">();</span>

	<span class="nx">newGlobals</span> <span class="o">=</span> <span class="nx">diff</span><span class="p">(</span> <span class="nx">config</span><span class="p">.</span><span class="nx">pollution</span><span class="p">,</span> <span class="nx">old</span> <span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span> <span class="nx">newGlobals</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">QUnit</span><span class="p">.</span><span class="nx">pushFailure</span><span class="p">(</span> <span class="s2">&quot;Introduced global variable(s): &quot;</span> <span class="o">+</span> <span class="nx">newGlobals</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="p">)</span> <span class="p">);</span>
	<span class="p">}</span>

	<span class="nx">deletedGlobals</span> <span class="o">=</span> <span class="nx">diff</span><span class="p">(</span> <span class="nx">old</span><span class="p">,</span> <span class="nx">config</span><span class="p">.</span><span class="nx">pollution</span> <span class="p">);</span>
	<span class="k">if</span> <span class="p">(</span> <span class="nx">deletedGlobals</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">QUnit</span><span class="p">.</span><span class="nx">pushFailure</span><span class="p">(</span> <span class="s2">&quot;Deleted global variable(s): &quot;</span> <span class="o">+</span> <span class="nx">deletedGlobals</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="p">)</span> <span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-120" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-120'>#</a>
          </div>
          <p>returns a new Array with the elements that are in a but not in b</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="kd">function</span> <span class="nx">diff</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span>
		<span class="nx">result</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>

	<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">result</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">for</span> <span class="p">(</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span> <span class="nx">result</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="nx">b</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
				<span class="nx">result</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
				<span class="nx">i</span><span class="o">--</span><span class="p">;</span>
				<span class="k">break</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">extend</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
	<span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">prop</span> <span class="k">in</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span> <span class="nx">b</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">delete</span> <span class="nx">a</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">];</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-121" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-121'>#</a>
          </div>
          <p>Avoid "Member not found" error in IE8 caused by setting window.constructor</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">prop</span> <span class="o">!==</span> <span class="s2">&quot;constructor&quot;</span> <span class="o">||</span> <span class="nx">a</span> <span class="o">!==</span> <span class="nb">window</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">a</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">b</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">];</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="nx">a</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">addEvent</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="kc">false</span> <span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">attachEvent</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">elem</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span> <span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="nx">fn</span><span class="p">();</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">id</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
	<span class="k">return</span> <span class="o">!!</span><span class="p">(</span> <span class="k">typeof</span> <span class="nb">document</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">document</span> <span class="o">&amp;&amp;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
		<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">registerLoggingCallback</span><span class="p">(</span> <span class="nx">key</span> <span class="p">)</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-122" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-122'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="k">return</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">config</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span> <span class="nx">callback</span> <span class="p">);</span>
	<span class="p">};</span>
<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-123" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-123'>#</a>
          </div>
          <p>Supports deprecated method of completely overwriting logging callbacks</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="kd">function</span> <span class="nx">runLoggingCallbacks</span><span class="p">(</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">scope</span><span class="p">,</span> <span class="nx">args</span> <span class="p">)</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-124" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-124'>#</a>
          </div>
          <p>debugger;</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">callbacks</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span> <span class="nx">key</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">QUnit</span><span class="p">[</span> <span class="nx">key</span> <span class="p">].</span><span class="nx">call</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span> <span class="nx">args</span> <span class="p">);</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="nx">callbacks</span> <span class="o">=</span> <span class="nx">config</span><span class="p">[</span> <span class="nx">key</span> <span class="p">];</span>
		<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">callbacks</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">callbacks</span><span class="p">[</span> <span class="nx">i</span> <span class="p">].</span><span class="nx">call</span><span class="p">(</span> <span class="nx">scope</span><span class="p">,</span> <span class="nx">args</span> <span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-125" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-125'>#</a>
          </div>
          <p>Test for equality any JavaScript type.
Author: Philippe Rathé <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#112;&#114;&#97;&#116;&#104;&#101;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;">&#112;&#114;&#97;&#116;&#104;&#101;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></p>
        </div>
        <div class='code'>
          
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-126" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-126'>#</a>
          </div>
          <p>Call the o related callback with the given arguments.</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">QUnit</span><span class="p">.</span><span class="nx">equiv</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

	<span class="kd">function</span> <span class="nx">bindCallbacks</span><span class="p">(</span> <span class="nx">o</span><span class="p">,</span> <span class="nx">callbacks</span><span class="p">,</span> <span class="nx">args</span> <span class="p">)</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">prop</span> <span class="o">=</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">objectType</span><span class="p">(</span> <span class="nx">o</span> <span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span> <span class="nx">prop</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">objectType</span><span class="p">(</span> <span class="nx">callbacks</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="p">)</span> <span class="p">{</span>
				<span class="k">return</span> <span class="nx">callbacks</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">].</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">callbacks</span><span class="p">,</span> <span class="nx">args</span> <span class="p">);</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="k">return</span> <span class="nx">callbacks</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">];</span> <span class="c1">// or undefined</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-127" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-127'>#</a>
          </div>
          <p>the real equiv function</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="kd">var</span> <span class="nx">innerEquiv</span><span class="p">,</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-128" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-128'>#</a>
          </div>
          <p>stack to decide between skip/abort functions</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="nx">callers</span> <span class="o">=</span> <span class="p">[],</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-129" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-129'>#</a>
          </div>
          <p>stack to avoiding loops from circular referencing</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="nx">parents</span> <span class="o">=</span> <span class="p">[],</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-130" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-130'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="nx">getProto</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">getPrototypeOf</span> <span class="o">||</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">return</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">__proto__</span><span class="p">;</span>
		<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-131" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-131'>#</a>
          </div>
          <p>for string, boolean, number and null</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="nx">callbacks</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

			<span class="kd">function</span> <span class="nx">useStrictEquality</span><span class="p">(</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">a</span> <span class="p">)</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span> <span class="nx">b</span> <span class="k">instanceof</span> <span class="nx">a</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">||</span> <span class="nx">a</span> <span class="k">instanceof</span> <span class="nx">b</span><span class="p">.</span><span class="nx">constructor</span> <span class="p">)</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-132" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-132'>#</a>
          </div>
          <p>to catch short annotaion VS 'new' annotation of a
declaration
e.g. var i = 1;
var j = new Number(1);</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>					<span class="k">return</span> <span class="nx">a</span> <span class="o">==</span> <span class="nx">b</span><span class="p">;</span>
				<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
					<span class="k">return</span> <span class="nx">a</span> <span class="o">===</span> <span class="nx">b</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span>

			<span class="k">return</span> <span class="p">{</span>
				<span class="s2">&quot;string&quot;</span><span class="o">:</span> <span class="nx">useStrictEquality</span><span class="p">,</span>
				<span class="s2">&quot;boolean&quot;</span><span class="o">:</span> <span class="nx">useStrictEquality</span><span class="p">,</span>
				<span class="s2">&quot;number&quot;</span><span class="o">:</span> <span class="nx">useStrictEquality</span><span class="p">,</span>
				<span class="s2">&quot;null&quot;</span><span class="o">:</span> <span class="nx">useStrictEquality</span><span class="p">,</span>
				<span class="s2">&quot;undefined&quot;</span><span class="o">:</span> <span class="nx">useStrictEquality</span><span class="p">,</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-133" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-133'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>				<span class="s2">&quot;nan&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
					<span class="k">return</span> <span class="nb">isNaN</span><span class="p">(</span> <span class="nx">b</span> <span class="p">);</span>
				<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-134" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-134'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>				<span class="s2">&quot;date&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">a</span> <span class="p">)</span> <span class="p">{</span>
					<span class="k">return</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">objectType</span><span class="p">(</span> <span class="nx">b</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;date&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">valueOf</span><span class="p">()</span> <span class="o">===</span> <span class="nx">b</span><span class="p">.</span><span class="nx">valueOf</span><span class="p">();</span>
				<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-135" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-135'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>				<span class="s2">&quot;regexp&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">a</span> <span class="p">)</span> <span class="p">{</span>
					<span class="k">return</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">objectType</span><span class="p">(</span> <span class="nx">b</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;regexp&quot;</span> <span class="o">&amp;&amp;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-136" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-136'>#</a>
          </div>
          <p>the regex itself</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>						<span class="nx">a</span><span class="p">.</span><span class="nx">source</span> <span class="o">===</span> <span class="nx">b</span><span class="p">.</span><span class="nx">source</span> <span class="o">&amp;&amp;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-137" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-137'>#</a>
          </div>
          <p>and its modifers</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>						<span class="nx">a</span><span class="p">.</span><span class="nx">global</span> <span class="o">===</span> <span class="nx">b</span><span class="p">.</span><span class="nx">global</span> <span class="o">&amp;&amp;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-138" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-138'>#</a>
          </div>
          <p>(gmi) ...</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>						<span class="nx">a</span><span class="p">.</span><span class="nx">ignoreCase</span> <span class="o">===</span> <span class="nx">b</span><span class="p">.</span><span class="nx">ignoreCase</span> <span class="o">&amp;&amp;</span>
						<span class="nx">a</span><span class="p">.</span><span class="nx">multiline</span> <span class="o">===</span> <span class="nx">b</span><span class="p">.</span><span class="nx">multiline</span> <span class="o">&amp;&amp;</span>
						<span class="nx">a</span><span class="p">.</span><span class="nx">sticky</span> <span class="o">===</span> <span class="nx">b</span><span class="p">.</span><span class="nx">sticky</span><span class="p">;</span>
				<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-139" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-139'>#</a>
          </div>
          <ul>
<li>skip when the property is a method of an instance (OOP)</li>
<li>abort otherwise,
initial === would have catch identical references anyway</li>
</ul>
        </div>
        <div class='code'>
          <div class="highlight"><pre>				<span class="s2">&quot;function&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">caller</span> <span class="o">=</span> <span class="nx">callers</span><span class="p">[</span><span class="nx">callers</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
					<span class="k">return</span> <span class="nx">caller</span> <span class="o">!==</span> <span class="nb">Object</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">caller</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span><span class="p">;</span>
				<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-140" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-140'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>				<span class="s2">&quot;array&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">a</span> <span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">len</span><span class="p">,</span> <span class="nx">loop</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-141" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-141'>#</a>
          </div>
          <p>b could be an object literal here</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>					<span class="k">if</span> <span class="p">(</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">objectType</span><span class="p">(</span> <span class="nx">b</span> <span class="p">)</span> <span class="o">!==</span> <span class="s2">&quot;array&quot;</span> <span class="p">)</span> <span class="p">{</span>
						<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
					<span class="p">}</span>

					<span class="nx">len</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
					<span class="k">if</span> <span class="p">(</span> <span class="nx">len</span> <span class="o">!==</span> <span class="nx">b</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-142" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-142'>#</a>
          </div>
          <p>safe and faster</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>						<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
					<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-143" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-143'>#</a>
          </div>
          <p>track reference to avoid circular references</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>					<span class="nx">parents</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">a</span> <span class="p">);</span>
					<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
						<span class="nx">loop</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
						<span class="k">for</span> <span class="p">(</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">parents</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
							<span class="k">if</span> <span class="p">(</span> <span class="nx">parents</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">===</span> <span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
								<span class="nx">loop</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span><span class="c1">// dont rewalk array</span>
							<span class="p">}</span>
						<span class="p">}</span>
						<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">loop</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">innerEquiv</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">b</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
							<span class="nx">parents</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
							<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
						<span class="p">}</span>
					<span class="p">}</span>
					<span class="nx">parents</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
					<span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
				<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-144" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-144'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>				<span class="s2">&quot;object&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">a</span> <span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">loop</span><span class="p">,</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-145" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-145'>#</a>
          </div>
          <p>Default to true</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>						<span class="nx">eq</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
						<span class="nx">aProperties</span> <span class="o">=</span> <span class="p">[],</span>
						<span class="nx">bProperties</span> <span class="o">=</span> <span class="p">[];</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-146" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-146'>#</a>
          </div>
          <p>comparing constructors is more strict than using
instanceof</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>					<span class="k">if</span> <span class="p">(</span> <span class="nx">a</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">!==</span> <span class="nx">b</span><span class="p">.</span><span class="nx">constructor</span> <span class="p">)</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-147" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-147'>#</a>
          </div>
          <p>Allow objects with no prototype to be equivalent to
objects with Object as their constructor.</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>						<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">((</span> <span class="nx">getProto</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">getProto</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="o">===</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span> <span class="p">)</span> <span class="o">||</span>
							<span class="p">(</span> <span class="nx">getProto</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">getProto</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">===</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
								<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
						<span class="p">}</span>
					<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-148" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-148'>#</a>
          </div>
          <p>stack constructor before traversing properties</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>					<span class="nx">callers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">a</span><span class="p">.</span><span class="nx">constructor</span> <span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-149" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-149'>#</a>
          </div>
          <p>track reference to avoid circular references</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>					<span class="nx">parents</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">a</span> <span class="p">);</span>

					<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">a</span> <span class="p">)</span> <span class="p">{</span> <span class="c1">// be strict: don&#39;t ensures hasOwnProperty</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-150" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-150'>#</a>
          </div>
          <p>and go deep</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>						<span class="nx">loop</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
						<span class="k">for</span> <span class="p">(</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">parents</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
							<span class="k">if</span> <span class="p">(</span> <span class="nx">parents</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">===</span> <span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-151" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-151'>#</a>
          </div>
          <p>don't go down the same path twice</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>								<span class="nx">loop</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
							<span class="p">}</span>
						<span class="p">}</span>
						<span class="nx">aProperties</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span> <span class="c1">// collect a&#39;s properties</span>

						<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">loop</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">innerEquiv</span><span class="p">(</span> <span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">b</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
							<span class="nx">eq</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
							<span class="k">break</span><span class="p">;</span>
						<span class="p">}</span>
					<span class="p">}</span>

					<span class="nx">callers</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span> <span class="c1">// unstack, we are done</span>
					<span class="nx">parents</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>

					<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
						<span class="nx">bProperties</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">i</span> <span class="p">);</span> <span class="c1">// collect b&#39;s properties</span>
					<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-152" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-152'>#</a>
          </div>
          <p>Ensures identical properties name</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>					<span class="k">return</span> <span class="nx">eq</span> <span class="o">&amp;&amp;</span> <span class="nx">innerEquiv</span><span class="p">(</span> <span class="nx">aProperties</span><span class="p">.</span><span class="nx">sort</span><span class="p">(),</span> <span class="nx">bProperties</span><span class="p">.</span><span class="nx">sort</span><span class="p">()</span> <span class="p">);</span>
				<span class="p">}</span>
			<span class="p">};</span>
		<span class="p">}());</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-153" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-153'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>	<span class="nx">innerEquiv</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// can take multiple arguments</span>
		<span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">arguments</span> <span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span> <span class="nx">args</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">return</span> <span class="kc">true</span><span class="p">;</span> <span class="c1">// end transition</span>
		<span class="p">}</span>

		<span class="k">return</span> <span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span> <span class="nx">a</span> <span class="o">===</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
				<span class="k">return</span> <span class="kc">true</span><span class="p">;</span> <span class="c1">// catch the most you can</span>
			<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">a</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">b</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">a</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">||</span>
					<span class="k">typeof</span> <span class="nx">b</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">||</span>
					<span class="nx">QUnit</span><span class="p">.</span><span class="nx">objectType</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">!==</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">objectType</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
				<span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">// don&#39;t lose time with error prone cases</span>
			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
				<span class="k">return</span> <span class="nx">bindCallbacks</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">callbacks</span><span class="p">,</span> <span class="p">[</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">a</span> <span class="p">]);</span>
			<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-154" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-154'>#</a>
          </div>
          <p>apply transition with (1..n) arguments</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="p">}(</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">args</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nx">args</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">))</span> <span class="p">);</span>
	<span class="p">};</span>

	<span class="k">return</span> <span class="nx">innerEquiv</span><span class="p">;</span>
<span class="p">}());</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-155" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-155'>#</a>
          </div>
          <p>jsDump Copyright (c) 2008 Ariel Flesler - aflesler(at)gmail(dot)com |
 <a href="http://flesler.blogspot.com">http://flesler.blogspot.com</a> Licensed under BSD
 (<a href="http://www.opensource.org/licenses/bsd-license.php">http://www.opensource.org/licenses/bsd-license.php</a>) Date: 5/15/2008</p>
<p><span class="pydoc pydoc-projectDescription"><span>projectDescription</span> <code>Advanced</code></span> and extensible data dumping for Javascript.
 <span class="pydoc pydoc-version"><span>version</span> <code>1.0.0</code></span> 
 <span class="pydoc pydoc-author"><span>author</span> <code>Ariel</code></span> Flesler
 <span class="pydoc pydoc-link"><span>link</span> <code>{<a href="http://flesler.blogspot.com/2008/05/jsdump-pretty-dump-of-any-javascript.html">http://flesler.blogspot.com/2008/05/jsdump-pretty-dump-of-any-javascript.html</a>}</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">QUnit</span><span class="p">.</span><span class="nx">jsDump</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	<span class="kd">function</span> <span class="nx">quote</span><span class="p">(</span> <span class="nx">str</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">return</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="nx">str</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span> <span class="sr">/&quot;/g</span><span class="p">,</span> <span class="s1">&#39;\\&quot;&#39;</span> <span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="kd">function</span> <span class="nx">literal</span><span class="p">(</span> <span class="nx">o</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">return</span> <span class="nx">o</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="kd">function</span> <span class="nx">join</span><span class="p">(</span> <span class="nx">pre</span><span class="p">,</span> <span class="nx">arr</span><span class="p">,</span> <span class="nx">post</span> <span class="p">)</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="nx">jsDump</span><span class="p">.</span><span class="nx">separator</span><span class="p">(),</span>
			<span class="nx">base</span> <span class="o">=</span> <span class="nx">jsDump</span><span class="p">.</span><span class="nx">indent</span><span class="p">(),</span>
			<span class="nx">inner</span> <span class="o">=</span> <span class="nx">jsDump</span><span class="p">.</span><span class="nx">indent</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">join</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">arr</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">s</span> <span class="o">+</span> <span class="nx">inner</span> <span class="p">);</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">arr</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">return</span> <span class="nx">pre</span> <span class="o">+</span> <span class="nx">post</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">return</span> <span class="p">[</span> <span class="nx">pre</span><span class="p">,</span> <span class="nx">inner</span> <span class="o">+</span> <span class="nx">arr</span><span class="p">,</span> <span class="nx">base</span> <span class="o">+</span> <span class="nx">post</span> <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="kd">function</span> <span class="nx">array</span><span class="p">(</span> <span class="nx">arr</span><span class="p">,</span> <span class="nx">stack</span> <span class="p">)</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">ret</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">up</span><span class="p">();</span>
		<span class="k">while</span> <span class="p">(</span> <span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span> <span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">,</span> <span class="kc">undefined</span> <span class="p">,</span> <span class="nx">stack</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">down</span><span class="p">();</span>
		<span class="k">return</span> <span class="nx">join</span><span class="p">(</span> <span class="s2">&quot;[&quot;</span><span class="p">,</span> <span class="nx">ret</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span> <span class="p">);</span>
	<span class="p">}</span>

	<span class="kd">var</span> <span class="nx">reName</span> <span class="o">=</span> <span class="sr">/^function (\w+)/</span><span class="p">,</span>
		<span class="nx">jsDump</span> <span class="o">=</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-156" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-156'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="nx">parse</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">obj</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">stack</span> <span class="p">)</span> <span class="p">{</span> <span class="c1">//type is used mostly internally, you can fix a (custom)type in advance</span>
				<span class="nx">stack</span> <span class="o">=</span> <span class="nx">stack</span> <span class="o">||</span> <span class="p">[</span> <span class="p">];</span>
				<span class="kd">var</span> <span class="nx">inStack</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span>
					<span class="nx">parser</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parsers</span><span class="p">[</span> <span class="nx">type</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">typeOf</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">];</span>

				<span class="nx">type</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">parser</span><span class="p">;</span>
				<span class="nx">inStack</span> <span class="o">=</span> <span class="nx">inArray</span><span class="p">(</span> <span class="nx">obj</span><span class="p">,</span> <span class="nx">stack</span> <span class="p">);</span>

				<span class="k">if</span> <span class="p">(</span> <span class="nx">inStack</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
					<span class="k">return</span> <span class="s2">&quot;recursion(&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">inStack</span> <span class="o">-</span> <span class="nx">stack</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">;</span>
				<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-157" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-157'>#</a>
          </div>
          <p>else</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>				<span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">==</span> <span class="s2">&quot;function&quot;</span> <span class="p">)</span>  <span class="p">{</span>
					<span class="nx">stack</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">);</span>
					<span class="nx">res</span> <span class="o">=</span> <span class="nx">parser</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">obj</span><span class="p">,</span> <span class="nx">stack</span> <span class="p">);</span>
					<span class="nx">stack</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
					<span class="k">return</span> <span class="nx">res</span><span class="p">;</span>
				<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-158" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-158'>#</a>
          </div>
          <p>else</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>				<span class="k">return</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="o">?</span> <span class="nx">parser</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">parsers</span><span class="p">.</span><span class="nx">error</span><span class="p">;</span>
			<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-159" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-159'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="nx">typeOf</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
				<span class="kd">var</span> <span class="nx">type</span><span class="p">;</span>
				<span class="k">if</span> <span class="p">(</span> <span class="nx">obj</span> <span class="o">===</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
					<span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;null&quot;</span><span class="p">;</span>
				<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">obj</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span> <span class="p">)</span> <span class="p">{</span>
					<span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;undefined&quot;</span><span class="p">;</span>
				<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span> <span class="s2">&quot;regexp&quot;</span><span class="p">,</span> <span class="nx">obj</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
					<span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;regexp&quot;</span><span class="p">;</span>
				<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span> <span class="s2">&quot;date&quot;</span><span class="p">,</span> <span class="nx">obj</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
					<span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;date&quot;</span><span class="p">;</span>
				<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span> <span class="nx">obj</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
					<span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;function&quot;</span><span class="p">;</span>
				<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">setInterval</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">obj</span><span class="p">.</span><span class="nb">document</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span> <span class="p">)</span> <span class="p">{</span>
					<span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;window&quot;</span><span class="p">;</span>
				<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">9</span> <span class="p">)</span> <span class="p">{</span>
					<span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;document&quot;</span><span class="p">;</span>
				<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">nodeType</span> <span class="p">)</span> <span class="p">{</span>
					<span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;node&quot;</span><span class="p">;</span>
				<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-160" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-160'>#</a>
          </div>
          <p>native arrays</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>					<span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;[object Array]&quot;</span> <span class="o">||</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-161" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-161'>#</a>
          </div>
          <p>NodeList objects</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>					<span class="p">(</span> <span class="k">typeof</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">item</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">item</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">===</span> <span class="nx">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="p">(</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">item</span><span class="p">(</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">obj</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span>
				<span class="p">)</span> <span class="p">{</span>
					<span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;array&quot;</span><span class="p">;</span>
				<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
					<span class="nx">type</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">obj</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="k">return</span> <span class="nx">type</span><span class="p">;</span>
			<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-162" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-162'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="nx">separator</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">multiline</span> <span class="o">?</span>	<span class="k">this</span><span class="p">.</span><span class="nx">HTML</span> <span class="o">?</span> <span class="s2">&quot;&lt;br /&gt;&quot;</span> <span class="o">:</span> <span class="s2">&quot;\n&quot;</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">HTML</span> <span class="o">?</span> <span class="s2">&quot;&amp;nbsp;&quot;</span> <span class="o">:</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>
			<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-163" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-163'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="nx">indent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">extra</span> <span class="p">)</span> <span class="p">{</span><span class="c1">// extra can be a number, shortcut for increasing-calling-decreasing</span>
				<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">multiline</span> <span class="p">)</span> <span class="p">{</span>
					<span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="kd">var</span> <span class="nx">chr</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">indentChar</span><span class="p">;</span>
				<span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">HTML</span> <span class="p">)</span> <span class="p">{</span>
					<span class="nx">chr</span> <span class="o">=</span> <span class="nx">chr</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="sr">/\t/g</span><span class="p">,</span> <span class="s2">&quot;   &quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="sr">/ /g</span><span class="p">,</span> <span class="s2">&quot;&amp;nbsp;&quot;</span> <span class="p">);</span>
				<span class="p">}</span>
				<span class="k">return</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">_depth_</span> <span class="o">+</span> <span class="p">(</span><span class="nx">extra</span><span class="o">||</span><span class="mi">0</span><span class="p">)</span> <span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="nx">chr</span><span class="p">);</span>
			<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-164" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-164'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="nx">up</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">a</span> <span class="p">)</span> <span class="p">{</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">_depth_</span> <span class="o">+=</span> <span class="nx">a</span> <span class="o">||</span> <span class="mi">1</span><span class="p">;</span>
			<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-165" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-165'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="nx">down</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">a</span> <span class="p">)</span> <span class="p">{</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">_depth_</span> <span class="o">-=</span> <span class="nx">a</span> <span class="o">||</span> <span class="mi">1</span><span class="p">;</span>
			<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-166" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-166'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="nx">setParser</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">parser</span> <span class="p">)</span> <span class="p">{</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">parsers</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">parser</span><span class="p">;</span>
			<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-167" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-167'>#</a>
          </div>
          <p>The next 3 are exposed so you can use them</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="nx">quote</span><span class="o">:</span> <span class="nx">quote</span><span class="p">,</span>
			<span class="nx">literal</span><span class="o">:</span> <span class="nx">literal</span><span class="p">,</span>
			<span class="nx">join</span><span class="o">:</span> <span class="nx">join</span><span class="p">,</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-168" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-168'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="nx">_depth_</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-169" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-169'>#</a>
          </div>
          <p>This is the list of parsers, to modify them, use jsDump.setParser</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>			<span class="nx">parsers</span><span class="o">:</span> <span class="p">{</span>
				<span class="nb">window</span><span class="o">:</span> <span class="s2">&quot;[Window]&quot;</span><span class="p">,</span>
				<span class="nb">document</span><span class="o">:</span> <span class="s2">&quot;[Document]&quot;</span><span class="p">,</span>
				<span class="nx">error</span><span class="o">:</span> <span class="s2">&quot;[ERROR]&quot;</span><span class="p">,</span> <span class="c1">//when no parser is found, shouldn&quot;t happen</span>
				<span class="nx">unknown</span><span class="o">:</span> <span class="s2">&quot;[Unknown]&quot;</span><span class="p">,</span>
				<span class="s2">&quot;null&quot;</span><span class="o">:</span> <span class="s2">&quot;null&quot;</span><span class="p">,</span>
				<span class="s2">&quot;undefined&quot;</span><span class="o">:</span> <span class="s2">&quot;undefined&quot;</span><span class="p">,</span>

				<span class="s2">&quot;function&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
						<span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;name&quot;</span> <span class="k">in</span> <span class="nx">fn</span> <span class="o">?</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">name</span> <span class="o">:</span> <span class="p">(</span><span class="nx">reName</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">fn</span><span class="p">)</span> <span class="o">||</span> <span class="p">[])[</span><span class="mi">1</span><span class="p">];</span><span class="c1">//functions never have name in IE</span>

					<span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
						<span class="nx">ret</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">;</span>
					<span class="p">}</span>
					<span class="nx">ret</span> <span class="o">+=</span> <span class="s2">&quot;( &quot;</span><span class="p">;</span>

					<span class="nx">ret</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">jsDump</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span> <span class="nx">fn</span><span class="p">,</span> <span class="s2">&quot;functionArgs&quot;</span> <span class="p">),</span> <span class="s2">&quot;){&quot;</span> <span class="p">].</span><span class="nx">join</span><span class="p">(</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
					<span class="k">return</span> <span class="nx">join</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">jsDump</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span><span class="s2">&quot;functionCode&quot;</span> <span class="p">),</span> <span class="s2">&quot;}&quot;</span> <span class="p">);</span>
				<span class="p">},</span>
				<span class="nx">array</span><span class="o">:</span> <span class="nx">array</span><span class="p">,</span>
				<span class="nx">nodelist</span><span class="o">:</span> <span class="nx">array</span><span class="p">,</span>
				<span class="s2">&quot;arguments&quot;</span><span class="o">:</span> <span class="nx">array</span><span class="p">,</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-170" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-170'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>				<span class="nx">object</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">map</span><span class="p">,</span> <span class="nx">stack</span> <span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="p">[</span> <span class="p">],</span> <span class="nx">keys</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">val</span><span class="p">,</span> <span class="nx">i</span><span class="p">;</span>
					<span class="nx">QUnit</span><span class="p">.</span><span class="nx">jsDump</span><span class="p">.</span><span class="nx">up</span><span class="p">();</span>
					<span class="k">if</span> <span class="p">(</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span> <span class="p">)</span> <span class="p">{</span>
						<span class="nx">keys</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span> <span class="nx">map</span> <span class="p">);</span>
					<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
						<span class="nx">keys</span> <span class="o">=</span> <span class="p">[];</span>
						<span class="k">for</span> <span class="p">(</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">map</span> <span class="p">)</span> <span class="p">{</span>
							<span class="nx">keys</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">key</span> <span class="p">);</span>
						<span class="p">}</span>
					<span class="p">}</span>
					<span class="nx">keys</span><span class="p">.</span><span class="nx">sort</span><span class="p">();</span>
					<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
						<span class="nx">key</span> <span class="o">=</span> <span class="nx">keys</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>
						<span class="nx">val</span> <span class="o">=</span> <span class="nx">map</span><span class="p">[</span> <span class="nx">key</span> <span class="p">];</span>
						<span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">jsDump</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span> <span class="nx">key</span><span class="p">,</span> <span class="s2">&quot;key&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">jsDump</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span> <span class="nx">val</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="nx">stack</span> <span class="p">)</span> <span class="p">);</span>
					<span class="p">}</span>
					<span class="nx">QUnit</span><span class="p">.</span><span class="nx">jsDump</span><span class="p">.</span><span class="nx">down</span><span class="p">();</span>
					<span class="k">return</span> <span class="nx">join</span><span class="p">(</span> <span class="s2">&quot;{&quot;</span><span class="p">,</span> <span class="nx">ret</span><span class="p">,</span> <span class="s2">&quot;}&quot;</span> <span class="p">);</span>
				<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-171" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-171'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>				<span class="nx">node</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">node</span> <span class="p">)</span> <span class="p">{</span>
					<span class="kd">var</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">val</span><span class="p">,</span>
						<span class="nx">open</span> <span class="o">=</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">jsDump</span><span class="p">.</span><span class="nx">HTML</span> <span class="o">?</span> <span class="s2">&quot;&amp;lt;&quot;</span> <span class="o">:</span> <span class="s2">&quot;&lt;&quot;</span><span class="p">,</span>
						<span class="nx">close</span> <span class="o">=</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">jsDump</span><span class="p">.</span><span class="nx">HTML</span> <span class="o">?</span> <span class="s2">&quot;&amp;gt;&quot;</span> <span class="o">:</span> <span class="s2">&quot;&gt;&quot;</span><span class="p">,</span>
						<span class="nx">tag</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">(),</span>
						<span class="nx">ret</span> <span class="o">=</span> <span class="nx">open</span> <span class="o">+</span> <span class="nx">tag</span><span class="p">;</span>

					<span class="k">for</span> <span class="p">(</span> <span class="nx">a</span> <span class="k">in</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">jsDump</span><span class="p">.</span><span class="nx">DOMAttrs</span> <span class="p">)</span> <span class="p">{</span>
						<span class="nx">val</span> <span class="o">=</span> <span class="nx">node</span><span class="p">[</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">jsDump</span><span class="p">.</span><span class="nx">DOMAttrs</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span> <span class="p">];</span>
						<span class="k">if</span> <span class="p">(</span> <span class="nx">val</span> <span class="p">)</span> <span class="p">{</span>
							<span class="nx">ret</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">a</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">+</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">jsDump</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span> <span class="nx">val</span><span class="p">,</span> <span class="s2">&quot;attribute&quot;</span> <span class="p">);</span>
						<span class="p">}</span>
					<span class="p">}</span>
					<span class="k">return</span> <span class="nx">ret</span> <span class="o">+</span> <span class="nx">close</span> <span class="o">+</span> <span class="nx">open</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nx">tag</span> <span class="o">+</span> <span class="nx">close</span><span class="p">;</span>
				<span class="p">},</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-172" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-172'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>				<span class="nx">functionArgs</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span><span class="c1">//function calls it internally, it&#39;s the arguments part of the function</span>
					<span class="kd">var</span> <span class="nx">args</span><span class="p">,</span>
						<span class="nx">l</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

					<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">l</span> <span class="p">)</span> <span class="p">{</span>
						<span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
					<span class="p">}</span>

					<span class="nx">args</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">l</span><span class="p">);</span>
					<span class="k">while</span> <span class="p">(</span> <span class="nx">l</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
						<span class="nx">args</span><span class="p">[</span><span class="nx">l</span><span class="p">]</span> <span class="o">=</span> <span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="mi">97</span><span class="o">+</span><span class="nx">l</span><span class="p">);</span><span class="c1">//97 is &#39;a&#39;</span>
					<span class="p">}</span>
					<span class="k">return</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">args</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span> <span class="s2">&quot;, &quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>
				<span class="p">},</span>
				<span class="nx">key</span><span class="o">:</span> <span class="nx">quote</span><span class="p">,</span> <span class="c1">//object calls it internally, the key part of an item in a map</span>
				<span class="nx">functionCode</span><span class="o">:</span> <span class="s2">&quot;[code]&quot;</span><span class="p">,</span> <span class="c1">//function calls it internally, it&#39;s the content of the function</span>
				<span class="nx">attribute</span><span class="o">:</span> <span class="nx">quote</span><span class="p">,</span> <span class="c1">//node calls it internally, it&#39;s an html attribute value</span>
				<span class="nx">string</span><span class="o">:</span> <span class="nx">quote</span><span class="p">,</span>
				<span class="nx">date</span><span class="o">:</span> <span class="nx">quote</span><span class="p">,</span>
				<span class="nx">regexp</span><span class="o">:</span> <span class="nx">literal</span><span class="p">,</span> <span class="c1">//regex</span>
				<span class="nx">number</span><span class="o">:</span> <span class="nx">literal</span><span class="p">,</span>
				<span class="s2">&quot;boolean&quot;</span><span class="o">:</span> <span class="nx">literal</span>
			<span class="p">},</span>
			<span class="nx">DOMAttrs</span><span class="o">:</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-173" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-173'>#</a>
          </div>
          <p>attributes to dump from nodes, name=&gt;realName</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>				<span class="nx">id</span><span class="o">:</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span>
				<span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span>
				<span class="s2">&quot;class&quot;</span><span class="o">:</span> <span class="s2">&quot;className&quot;</span>
			<span class="p">},</span>
			<span class="nx">HTML</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span><span class="c1">//if true, entities are escaped ( &lt;, &gt;, \t, space and \n )</span>
			<span class="nx">indentChar</span><span class="o">:</span> <span class="s2">&quot;  &quot;</span><span class="p">,</span><span class="c1">//indentation unit</span>
			<span class="nx">multiline</span><span class="o">:</span> <span class="kc">true</span> <span class="c1">//if true, items in a collection, are separated by a \n, else just a space.</span>
		<span class="p">};</span>

	<span class="k">return</span> <span class="nx">jsDump</span><span class="p">;</span>
<span class="p">}());</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-174" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-174'>#</a>
          </div>
          <p>from Sizzle.js</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="kd">function</span> <span class="nx">getText</span><span class="p">(</span> <span class="nx">elems</span> <span class="p">)</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span>
		<span class="nx">ret</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

	<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">elem</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-175" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-175'>#</a>
          </div>
          <p>Get the text from text nodes and CDATA nodes</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">4</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">ret</span> <span class="o">+=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeValue</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-176" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-176'>#</a>
          </div>
          <p>Traverse everything else, except comment nodes</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">8</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">ret</span> <span class="o">+=</span> <span class="nx">getText</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">childNodes</span> <span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-177" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-177'>#</a>
          </div>
          <p>from jquery.js</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="kd">function</span> <span class="nx">inArray</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">array</span> <span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span> <span class="nx">array</span><span class="p">.</span><span class="nx">indexOf</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">return</span> <span class="nx">array</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
	<span class="p">}</span>

	<span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span> <span class="nx">array</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">===</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">return</span> <span class="nx">i</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-178" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-178'>#</a>
          </div>
          <p>Javascript Diff Algorithm
  By John Resig (<a href="http://ejohn.org/">http://ejohn.org/</a>)
  Modified by Chu Alan "sprite"</p>
<p>Released under the MIT license.</p>
<p>More Info:
  <a href="http://ejohn.org/projects/javascript-diff-algorithm/">http://ejohn.org/projects/javascript-diff-algorithm/</a></p>
<p>Usage: QUnit.diff(expected, actual)</p>
<p>QUnit.diff( "the quick brown fox jumped over", "the quick fox jumps over" ) == "the  quick <del>brown </del> fox <del>jumped </del><ins>jumps </ins> over"</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">QUnit</span><span class="p">.</span><span class="nx">diff</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	<span class="kd">function</span> <span class="nx">diff</span><span class="p">(</span> <span class="nx">o</span><span class="p">,</span> <span class="nx">n</span> <span class="p">)</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span>
			<span class="nx">ns</span> <span class="o">=</span> <span class="p">{},</span>
			<span class="nx">os</span> <span class="o">=</span> <span class="p">{};</span>

		<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span> <span class="nx">ns</span><span class="p">[</span> <span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">]</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
				<span class="nx">ns</span><span class="p">[</span> <span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
					<span class="nx">rows</span><span class="o">:</span> <span class="p">[],</span>
					<span class="nx">o</span><span class="o">:</span> <span class="kc">null</span>
				<span class="p">};</span>
			<span class="p">}</span>
			<span class="nx">ns</span><span class="p">[</span> <span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">].</span><span class="nx">rows</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">i</span> <span class="p">);</span>
		<span class="p">}</span>

		<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">o</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span> <span class="nx">os</span><span class="p">[</span> <span class="nx">o</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">]</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
				<span class="nx">os</span><span class="p">[</span> <span class="nx">o</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
					<span class="nx">rows</span><span class="o">:</span> <span class="p">[],</span>
					<span class="nx">n</span><span class="o">:</span> <span class="kc">null</span>
				<span class="p">};</span>
			<span class="p">}</span>
			<span class="nx">os</span><span class="p">[</span> <span class="nx">o</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">].</span><span class="nx">rows</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">i</span> <span class="p">);</span>
		<span class="p">}</span>

		<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">ns</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">hasOwn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">ns</span><span class="p">,</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
				<span class="k">continue</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">(</span> <span class="nx">ns</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">rows</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">os</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">os</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">rows</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
				<span class="nx">n</span><span class="p">[</span> <span class="nx">ns</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
					<span class="nx">text</span><span class="o">:</span> <span class="nx">n</span><span class="p">[</span> <span class="nx">ns</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">],</span>
					<span class="nx">row</span><span class="o">:</span> <span class="nx">os</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
				<span class="p">};</span>
				<span class="nx">o</span><span class="p">[</span> <span class="nx">os</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
					<span class="nx">text</span><span class="o">:</span> <span class="nx">o</span><span class="p">[</span> <span class="nx">os</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">],</span>
					<span class="nx">row</span><span class="o">:</span> <span class="nx">ns</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
				<span class="p">};</span>
			<span class="p">}</span>
		<span class="p">}</span>

		<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span> <span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">text</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">n</span><span class="p">[</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">].</span><span class="nx">text</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">row</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="nx">o</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">o</span><span class="p">[</span> <span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">row</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">].</span><span class="nx">text</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span>
						<span class="nx">n</span><span class="p">[</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">==</span> <span class="nx">o</span><span class="p">[</span> <span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">row</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>

				<span class="nx">n</span><span class="p">[</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
					<span class="nx">text</span><span class="o">:</span> <span class="nx">n</span><span class="p">[</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">],</span>
					<span class="nx">row</span><span class="o">:</span> <span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">row</span> <span class="o">+</span> <span class="mi">1</span>
				<span class="p">};</span>
				<span class="nx">o</span><span class="p">[</span> <span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">row</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
					<span class="nx">text</span><span class="o">:</span> <span class="nx">o</span><span class="p">[</span> <span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">row</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">],</span>
					<span class="nx">row</span><span class="o">:</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span>
				<span class="p">};</span>
			<span class="p">}</span>
		<span class="p">}</span>

		<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">n</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span> <span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">text</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">n</span><span class="p">[</span> <span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">].</span><span class="nx">text</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">row</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">o</span><span class="p">[</span> <span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">row</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">].</span><span class="nx">text</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span>
						<span class="nx">n</span><span class="p">[</span> <span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">==</span> <span class="nx">o</span><span class="p">[</span> <span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">row</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">])</span> <span class="p">{</span>

				<span class="nx">n</span><span class="p">[</span> <span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
					<span class="nx">text</span><span class="o">:</span> <span class="nx">n</span><span class="p">[</span> <span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">],</span>
					<span class="nx">row</span><span class="o">:</span> <span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">row</span> <span class="o">-</span> <span class="mi">1</span>
				<span class="p">};</span>
				<span class="nx">o</span><span class="p">[</span> <span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">row</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
					<span class="nx">text</span><span class="o">:</span> <span class="nx">o</span><span class="p">[</span> <span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">row</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">],</span>
					<span class="nx">row</span><span class="o">:</span> <span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span>
				<span class="p">};</span>
			<span class="p">}</span>
		<span class="p">}</span>

		<span class="k">return</span> <span class="p">{</span>
			<span class="nx">o</span><span class="o">:</span> <span class="nx">o</span><span class="p">,</span>
			<span class="nx">n</span><span class="o">:</span> <span class="nx">n</span>
		<span class="p">};</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">o</span><span class="p">,</span> <span class="nx">n</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">o</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="sr">/\s+$/</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
		<span class="nx">n</span> <span class="o">=</span> <span class="nx">n</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="sr">/\s+$/</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>

		<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">pre</span><span class="p">,</span>
			<span class="nx">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
			<span class="nx">out</span> <span class="o">=</span> <span class="nx">diff</span><span class="p">(</span> <span class="nx">o</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="o">?</span> <span class="p">[]</span> <span class="o">:</span> <span class="nx">o</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">),</span> <span class="nx">n</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="o">?</span> <span class="p">[]</span> <span class="o">:</span> <span class="nx">n</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">)</span> <span class="p">),</span>
			<span class="nx">oSpace</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\s+/g</span><span class="p">),</span>
			<span class="nx">nSpace</span> <span class="o">=</span> <span class="nx">n</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\s+/g</span><span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span> <span class="nx">oSpace</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">oSpace</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">&quot; &quot;</span> <span class="p">];</span>
		<span class="p">}</span>
		<span class="k">else</span> <span class="p">{</span>
			<span class="nx">oSpace</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="p">);</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="p">(</span> <span class="nx">nSpace</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
			<span class="nx">nSpace</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">&quot; &quot;</span> <span class="p">];</span>
		<span class="p">}</span>
		<span class="k">else</span> <span class="p">{</span>
			<span class="nx">nSpace</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="p">);</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="p">(</span> <span class="nx">out</span><span class="p">.</span><span class="nx">n</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
			<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">out</span><span class="p">.</span><span class="nx">o</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
				<span class="nx">str</span> <span class="o">+=</span> <span class="s2">&quot;&lt;del&gt;&quot;</span> <span class="o">+</span> <span class="nx">out</span><span class="p">.</span><span class="nx">o</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+</span> <span class="nx">oSpace</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;&lt;/del&gt;&quot;</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="k">else</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span> <span class="nx">out</span><span class="p">.</span><span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">text</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
				<span class="k">for</span> <span class="p">(</span> <span class="nx">n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">n</span> <span class="o">&lt;</span> <span class="nx">out</span><span class="p">.</span><span class="nx">o</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">out</span><span class="p">.</span><span class="nx">o</span><span class="p">[</span><span class="nx">n</span><span class="p">].</span><span class="nx">text</span> <span class="o">==</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">n</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
					<span class="nx">str</span> <span class="o">+=</span> <span class="s2">&quot;&lt;del&gt;&quot;</span> <span class="o">+</span> <span class="nx">out</span><span class="p">.</span><span class="nx">o</span><span class="p">[</span><span class="nx">n</span><span class="p">]</span> <span class="o">+</span> <span class="nx">oSpace</span><span class="p">[</span><span class="nx">n</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;&lt;/del&gt;&quot;</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span>

			<span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">out</span><span class="p">.</span><span class="nx">n</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="nx">out</span><span class="p">.</span><span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">text</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
					<span class="nx">str</span> <span class="o">+=</span> <span class="s2">&quot;&lt;ins&gt;&quot;</span> <span class="o">+</span> <span class="nx">out</span><span class="p">.</span><span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+</span> <span class="nx">nSpace</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;&lt;/ins&gt;&quot;</span><span class="p">;</span>
				<span class="p">}</span>
				<span class="k">else</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-179" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-179'>#</a>
          </div>
          <p><code>pre</code> initialized at top of scope</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>					<span class="nx">pre</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

					<span class="k">for</span> <span class="p">(</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">out</span><span class="p">.</span><span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">row</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">n</span> <span class="o">&lt;</span> <span class="nx">out</span><span class="p">.</span><span class="nx">o</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">out</span><span class="p">.</span><span class="nx">o</span><span class="p">[</span><span class="nx">n</span><span class="p">].</span><span class="nx">text</span> <span class="o">==</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">n</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
						<span class="nx">pre</span> <span class="o">+=</span> <span class="s2">&quot;&lt;del&gt;&quot;</span> <span class="o">+</span> <span class="nx">out</span><span class="p">.</span><span class="nx">o</span><span class="p">[</span><span class="nx">n</span><span class="p">]</span> <span class="o">+</span> <span class="nx">oSpace</span><span class="p">[</span><span class="nx">n</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;&lt;/del&gt;&quot;</span><span class="p">;</span>
					<span class="p">}</span>
					<span class="nx">str</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">out</span><span class="p">.</span><span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">text</span> <span class="o">+</span> <span class="nx">nSpace</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+</span> <span class="nx">pre</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="p">}</span>

		<span class="k">return</span> <span class="nx">str</span><span class="p">;</span>
	<span class="p">};</span>
<span class="p">}());</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-180" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-180'>#</a>
          </div>
          <p>for CommonJS enviroments, export everything</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">exports</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="p">)</span> <span class="p">{</span>
	<span class="nx">extend</span><span class="p">(</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">QUnit</span><span class="p">);</span>
<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-181" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-181'>#</a>
          </div>
          <p>get at whatever the global object is, like window in browsers</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="p">}(</span> <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span><span class="k">return</span> <span class="k">this</span><span class="p">;}.</span><span class="nx">call</span><span class="p">())</span> <span class="p">));</span>

</pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
  </div>
</body>
