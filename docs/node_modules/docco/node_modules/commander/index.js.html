<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>. documentation: node_modules/docco/node_modules/commander/index.js</title>
  <link rel="stylesheet" href="../../../../pyccoon.css">
</head>
<body>
<div id='container' >
  <div id="footer">
    <span id="project-name">
        <a class="btn" href="../../../../index.html">. documentation</a>
    </span>
    <a class="btn" class="source source-1" href="#top">Back to top</a>
    <div class="generation-time">
        Generated at
        <code>2015-10-31 20:19</code>
        by a diligent
        <a target="_blank" href="http://ckald.github.io/pyccoon/" title="Pyccoon: side-to-side documentation generator">
            <img id="pyccoon-icon" src="../../../../pyccoon_icon.svg" alt="Pyccoon: side-to-side documentation generator" />pyccoon</a>
    </div>
  </div>
  <a id="top"></a>
  <div class='section'>
    <div class='docs nav'>
      <nav id="breadcrumbs">/ <a href="index.js.html/../../../../../index.html">.</a> / <a href="index.js.html/../../../../index.html">node_modules</a> / <a href="index.js.html/../../../index.html">docco</a> / <a href="index.js.html/../../index.html">node_modules</a> / <a href="index.js.html/../index.html">commander</a> / index.js</nav>
      <ul id="children"><li><a href="node_modules/index.html" class="directory">node_modules</a></li><li><a href="index.js.html">index.js</a></li><li><a href="Readme.md.html">Readme.md</a></li><li><a href="package.json">package.json</a></li></ul>
    </div>
  </div>
  <div id="everything" class='clearall'>
    <div id="background"></div>
    <div class='section'>
    <a id="section-0" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-0'>#</a>
          </div>
          <p>Module dependencies.</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="kd">var</span> <span class="nx">EventEmitter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;events&#39;</span><span class="p">).</span><span class="nx">EventEmitter</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">spawn</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;child_process&#39;</span><span class="p">).</span><span class="nx">spawn</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">readlink</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;graceful-readlink&#39;</span><span class="p">).</span><span class="nx">readlinkSync</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">dirname</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">dirname</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">basename</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">basename</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-1" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-1'>#</a>
          </div>
          <p>Expose the root command.</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">exports</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Command</span><span class="p">();</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-2" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-2'>#</a>
          </div>
          <p>Expose <code>Command</code>.</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">exports</span><span class="p">.</span><span class="nx">Command</span> <span class="o">=</span> <span class="nx">Command</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-3" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-3'>#</a>
          </div>
          <p>Expose <code>Option</code>.</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">exports</span><span class="p">.</span><span class="nx">Option</span> <span class="o">=</span> <span class="nx">Option</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-4" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-4'>#</a>
          </div>
          <p>Initialize a new <code>Option</code> with the given <code>flags</code> and <code>description</code>.</p>
<p><span class="pydoc pydoc-param"><span>param</span> <code>{String}</code></span> flags
 <span class="pydoc pydoc-param"><span>param</span> <code>{String}</code></span> description
 <span class="pydoc pydoc-api"><span>api</span> <code>public</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="kd">function</span> <span class="nx">Option</span><span class="p">(</span><span class="nx">flags</span><span class="p">,</span> <span class="nx">description</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">flags</span> <span class="o">=</span> <span class="nx">flags</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">required</span> <span class="o">=</span> <span class="o">~</span><span class="nx">flags</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;&lt;&#39;</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">optional</span> <span class="o">=</span> <span class="o">~</span><span class="nx">flags</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">bool</span> <span class="o">=</span> <span class="o">!~</span><span class="nx">flags</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;-no-&#39;</span><span class="p">);</span>
  <span class="nx">flags</span> <span class="o">=</span> <span class="nx">flags</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/[ ,|]+/</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">flags</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="sr">/^[[&lt;]/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">flags</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> <span class="k">this</span><span class="p">.</span><span class="kr">short</span> <span class="o">=</span> <span class="nx">flags</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
  <span class="k">this</span><span class="p">.</span><span class="kr">long</span> <span class="o">=</span> <span class="nx">flags</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">description</span> <span class="o">=</span> <span class="nx">description</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-5" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-5'>#</a>
          </div>
          <p>Return option name.</p>
<p><span class="pydoc pydoc-return"><span>return</span> <code>{String}</code></span> 
 <span class="pydoc pydoc-api"><span>api</span> <code>private</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Option</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="kr">long</span>
    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;no-&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-6" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-6'>#</a>
          </div>
          <p>Check if <code>arg</code> matches the short or long flag.</p>
<p><span class="pydoc pydoc-param"><span>param</span> <code>{String}</code></span> arg
 <span class="pydoc pydoc-return"><span>return</span> <code>{Boolean}</code></span> 
 <span class="pydoc pydoc-api"><span>api</span> <code>private</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Option</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">is</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">arg</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">arg</span> <span class="o">==</span> <span class="k">this</span><span class="p">.</span><span class="kr">short</span> <span class="o">||</span> <span class="nx">arg</span> <span class="o">==</span> <span class="k">this</span><span class="p">.</span><span class="kr">long</span><span class="p">;</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-7" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-7'>#</a>
          </div>
          <p>Initialize a new <code>Command</code>.</p>
<p><span class="pydoc pydoc-param"><span>param</span> <code>{String}</code></span> name
 <span class="pydoc pydoc-api"><span>api</span> <code>public</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="kd">function</span> <span class="nx">Command</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">commands</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_execs</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_allowUnknownOption</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_args</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_name</span> <span class="o">=</span> <span class="nx">name</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-8" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-8'>#</a>
          </div>
          <p>Inherit from <code>EventEmitter.prototype</code>.</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">__proto__</span> <span class="o">=</span> <span class="nx">EventEmitter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-9" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-9'>#</a>
          </div>
          <p>Add command <code>name</code>.</p>
<p>The <code>.action()</code> callback is invoked when the
 command <code>name</code> is specified via <strong>ARGV</strong>,
 and the remaining arguments are applied to the
 function for access.</p>
<p>When the <code>name</code> is "*" an un-matched command
 will be passed as the first arg, followed by
 the rest of <strong>ARGV</strong> remaining.</p>
<p>Examples:</p>
<div class="codehilite"><pre>  <span class="nx">program</span>
    <span class="p">.</span><span class="nx">version</span><span class="p">(</span><span class="s1">&#39;0.0.1&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">option</span><span class="p">(</span><span class="s1">&#39;-C, --chdir &lt;path&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;change the working directory&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">option</span><span class="p">(</span><span class="s1">&#39;-c, --config &lt;path&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;set config path. defaults to ./deploy.conf&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">option</span><span class="p">(</span><span class="s1">&#39;-T, --no-tests&#39;</span><span class="p">,</span> <span class="s1">&#39;ignore test hook&#39;</span><span class="p">)</span>

  <span class="nx">program</span>
    <span class="p">.</span><span class="nx">command</span><span class="p">(</span><span class="s1">&#39;setup&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">description</span><span class="p">(</span><span class="s1">&#39;run remote setup commands&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">action</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;setup&#39;</span><span class="p">);</span>
    <span class="p">});</span>

  <span class="nx">program</span>
    <span class="p">.</span><span class="nx">command</span><span class="p">(</span><span class="s1">&#39;exec &lt;cmd&gt;&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">description</span><span class="p">(</span><span class="s1">&#39;run the given remote command&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">action</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">cmd</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;exec &quot;%s&quot;&#39;</span><span class="p">,</span> <span class="nx">cmd</span><span class="p">);</span>
    <span class="p">});</span>

  <span class="nx">program</span>
    <span class="p">.</span><span class="nx">command</span><span class="p">(</span><span class="s1">&#39;teardown &lt;dir&gt; </span><span class="cp">[</span><span class="nx">otherDirs...</span><span class="cp">]</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">description</span><span class="p">(</span><span class="s1">&#39;run teardown commands&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">action</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">dir</span><span class="p">,</span> <span class="nx">otherDirs</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;dir &quot;%s&quot;&#39;</span><span class="p">,</span> <span class="nx">dir</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">otherDirs</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">otherDirs</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">oDir</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;dir &quot;%s&quot;&#39;</span><span class="p">,</span> <span class="nx">oDir</span><span class="p">);</span>
        <span class="p">});</span>
      <span class="p">}</span>
    <span class="p">});</span>

  <span class="nx">program</span>
    <span class="p">.</span><span class="nx">command</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">description</span><span class="p">(</span><span class="s1">&#39;deploy the given env&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">action</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">env</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;deploying &quot;%s&quot;&#39;</span><span class="p">,</span> <span class="nx">env</span><span class="p">);</span>
    <span class="p">});</span>

  <span class="nx">program</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">argv</span><span class="p">);</span>
</pre></div>


<p><span class="pydoc pydoc-param"><span>param</span> <code>{String}</code></span> name
 <span class="pydoc pydoc-param"><span>param</span> <code>{String}</code></span> [desc] for git-style sub-commands
 <span class="pydoc pydoc-return"><span>return</span> <code>{Command}</code></span> the new command
 <span class="pydoc pydoc-api"><span>api</span> <code>public</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">command</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">desc</span><span class="p">,</span> <span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">opts</span> <span class="o">=</span> <span class="nx">opts</span> <span class="o">||</span> <span class="p">{};</span>
  <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/ +/</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Command</span><span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">shift</span><span class="p">());</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">desc</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">cmd</span><span class="p">.</span><span class="nx">description</span><span class="p">(</span><span class="nx">desc</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">executables</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_execs</span><span class="p">[</span><span class="nx">cmd</span><span class="p">.</span><span class="nx">_name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">isDefault</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">defaultExecutable</span> <span class="o">=</span> <span class="nx">cmd</span><span class="p">.</span><span class="nx">_name</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">cmd</span><span class="p">.</span><span class="nx">_noHelp</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">opts</span><span class="p">.</span><span class="nx">noHelp</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">commands</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">cmd</span><span class="p">);</span>
  <span class="nx">cmd</span><span class="p">.</span><span class="nx">parseExpectedArgs</span><span class="p">(</span><span class="nx">args</span><span class="p">);</span>
  <span class="nx">cmd</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">desc</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">cmd</span><span class="p">;</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-10" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-10'>#</a>
          </div>
          <p>Define argument syntax for the top-level command.</p>
<p><span class="pydoc pydoc-api"><span>api</span> <code>public</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">arguments</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">desc</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">parseExpectedArgs</span><span class="p">(</span><span class="nx">desc</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/ +/</span><span class="p">));</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-11" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-11'>#</a>
          </div>
          <p>Add an implicit <code>help [cmd]</code> subcommand
 which invokes <code>--help</code> for the given command.</p>
<p><span class="pydoc pydoc-api"><span>api</span> <code>private</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addImplicitHelpCommand</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">command</span><span class="p">(</span><span class="s1">&#39;help [cmd]&#39;</span><span class="p">,</span> <span class="s1">&#39;display help for [cmd]&#39;</span><span class="p">);</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-12" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-12'>#</a>
          </div>
          <p>Parse expected <code>args</code>.</p>
<p>For example <code>["[type]"]</code> becomes <code>[{ required: false, name: 'type' }]</code>.</p>
<p><span class="pydoc pydoc-param"><span>param</span> <code>{Array}</code></span> args
 <span class="pydoc pydoc-return"><span>return</span> <code>{Command}</code></span> for chaining
 <span class="pydoc pydoc-api"><span>api</span> <code>public</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">parseExpectedArgs</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">args</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

  <span class="nx">args</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">arg</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">argDetails</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">required</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
      <span class="nx">variadic</span><span class="o">:</span> <span class="kc">false</span>
    <span class="p">};</span>

    <span class="k">switch</span> <span class="p">(</span><span class="nx">arg</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
      <span class="k">case</span> <span class="s1">&#39;&lt;&#39;</span><span class="o">:</span>
        <span class="nx">argDetails</span><span class="p">.</span><span class="nx">required</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">argDetails</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">arg</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="s1">&#39;[&#39;</span><span class="o">:</span>
        <span class="nx">argDetails</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">arg</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">argDetails</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="nx">argDetails</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span> <span class="o">===</span> <span class="s1">&#39;...&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">argDetails</span><span class="p">.</span><span class="nx">variadic</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="nx">argDetails</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">argDetails</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">argDetails</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">_args</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">argDetails</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-13" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-13'>#</a>
          </div>
          <p>Register callback <code>fn</code> for the command.</p>
<p>Examples:</p>
<div class="codehilite"><pre>  <span class="nx">program</span>
    <span class="p">.</span><span class="nx">command</span><span class="p">(</span><span class="s1">&#39;help&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">description</span><span class="p">(</span><span class="s1">&#39;display verbose help&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">action</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
       <span class="c1">// output help here</span>
    <span class="p">});</span>
</pre></div>


<p><span class="pydoc pydoc-param"><span>param</span> <code>{Function}</code></span> fn
 <span class="pydoc pydoc-return"><span>return</span> <code>{Command}</code></span> for chaining
 <span class="pydoc pydoc-api"><span>api</span> <code>public</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">action</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-14" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-14'>#</a>
          </div>
          <p>Parse any so-far unknown options</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">listener</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">args</span><span class="p">,</span> <span class="nx">unknown</span><span class="p">)</span> <span class="p">{</span>

    <span class="nx">args</span> <span class="o">=</span> <span class="nx">args</span> <span class="o">||</span> <span class="p">[];</span>
    <span class="nx">unknown</span> <span class="o">=</span> <span class="nx">unknown</span> <span class="o">||</span> <span class="p">[];</span>

    <span class="kd">var</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">parseOptions</span><span class="p">(</span><span class="nx">unknown</span><span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-15" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-15'>#</a>
          </div>
          <p>Output help if necessary</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="nx">outputHelpIfNecessary</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">unknown</span><span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-16" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-16'>#</a>
          </div>
          <p>If there are still any unknown options, then we simply
die, unless someone asked for help, in which case we give it
to them, and then we die.</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span><span class="nx">parsed</span><span class="p">.</span><span class="nx">unknown</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">unknownOption</span><span class="p">(</span><span class="nx">parsed</span><span class="p">.</span><span class="nx">unknown</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-17" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-17'>#</a>
          </div>
          <p>Leftover arguments need to be pushed back. Fixes issue #56</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span><span class="nx">parsed</span><span class="p">.</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">args</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">args</span><span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-18" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-18'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="nx">self</span><span class="p">.</span><span class="nx">_args</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">arg</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">arg</span><span class="p">.</span><span class="nx">required</span> <span class="o">&amp;&amp;</span> <span class="kc">null</span> <span class="o">==</span> <span class="nx">args</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">{</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">missingArgument</span><span class="p">(</span><span class="nx">arg</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">arg</span><span class="p">.</span><span class="nx">variadic</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">!==</span> <span class="nx">self</span><span class="p">.</span><span class="nx">_args</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">variadicArgNotLast</span><span class="p">(</span><span class="nx">arg</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">args</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">args</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-19" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-19'>#</a>
          </div>
          <p>Always append ourselves to the end of the arguments,
to make sure we match the number of arguments the user
expects</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">_args</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">args</span><span class="p">[</span><span class="nx">self</span><span class="p">.</span><span class="nx">_args</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span> <span class="o">=</span> <span class="nx">self</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">args</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">self</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">args</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span> <span class="o">||</span> <span class="k">this</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">parent</span> <span class="o">===</span> <span class="k">this</span> <span class="o">?</span> <span class="s1">&#39;*&#39;</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_name</span><span class="p">;</span>
  <span class="nx">parent</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_alias</span><span class="p">)</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_alias</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-20" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-20'>#</a>
          </div>
          <p>Define option with <code>flags</code>, <code>description</code> and optional
 coercion <code>fn</code>.</p>
<p>The <code>flags</code> string should contain both the short and long flags,
 separated by comma, a pipe or space. The following are all valid
 all will output this way when <code>--help</code> is used.</p>
<div class="codehilite"><pre>&quot;-p, --pepper&quot;
&quot;-p|--pepper&quot;
&quot;-p --pepper&quot;
</pre></div>


<p>Examples:</p>
<div class="codehilite"><pre> // simple boolean defaulting to false
 program.option(&#39;-p, --pepper&#39;, &#39;add pepper&#39;);

 --pepper
 program.pepper
 // =&gt; Boolean

 // simple boolean defaulting to true
 program.option(&#39;-C, --no-cheese&#39;, &#39;remove cheese&#39;);

 program.cheese
 // =&gt; true

 --no-cheese
 program.cheese
 // =&gt; false

 // required argument
 program.option(&#39;-C, --chdir &lt;path&gt;&#39;, &#39;change the working directory&#39;);

 --chdir /tmp
 program.chdir
 // =&gt; &quot;/tmp&quot;

 // optional argument
 program.option(&#39;-c, --cheese [type]&#39;, &#39;add cheese [marble]&#39;);
</pre></div>


<p><span class="pydoc pydoc-param"><span>param</span> <code>{String}</code></span> flags
 <span class="pydoc pydoc-param"><span>param</span> <code>{String}</code></span> description
 <span class="pydoc pydoc-param"><span>param</span> <code>{Function|Mixed}</code></span> fn or default
 <span class="pydoc pydoc-param"><span>param</span> <code>{Mixed}</code></span> defaultValue
 <span class="pydoc pydoc-return"><span>return</span> <code>{Command}</code></span> for chaining
 <span class="pydoc pydoc-api"><span>api</span> <code>public</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">option</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">flags</span><span class="p">,</span> <span class="nx">description</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">defaultValue</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span>
    <span class="p">,</span> <span class="nx">option</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Option</span><span class="p">(</span><span class="nx">flags</span><span class="p">,</span> <span class="nx">description</span><span class="p">)</span>
    <span class="p">,</span> <span class="nx">oname</span> <span class="o">=</span> <span class="nx">option</span><span class="p">.</span><span class="nx">name</span><span class="p">()</span>
    <span class="p">,</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">camelcase</span><span class="p">(</span><span class="nx">oname</span><span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-21" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-21'>#</a>
          </div>
          <p>default as 3rd arg</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">fn</span> <span class="o">!=</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">fn</span> <span class="k">instanceof</span> <span class="nb">RegExp</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">regex</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">;</span>

      <span class="nx">fn</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">def</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">regex</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">m</span> <span class="o">?</span> <span class="nx">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="nx">def</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
      <span class="nx">defaultValue</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">;</span>
      <span class="nx">fn</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-22" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-22'>#</a>
          </div>
          <p>preassign default value only for --no-*, [optional], or <required></p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>  <span class="k">if</span> <span class="p">(</span><span class="kc">false</span> <span class="o">==</span> <span class="nx">option</span><span class="p">.</span><span class="nx">bool</span> <span class="o">||</span> <span class="nx">option</span><span class="p">.</span><span class="nx">optional</span> <span class="o">||</span> <span class="nx">option</span><span class="p">.</span><span class="nx">required</span><span class="p">)</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-23" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-23'>#</a>
          </div>
          <p>when --no-* we make sure default is true</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span><span class="kc">false</span> <span class="o">==</span> <span class="nx">option</span><span class="p">.</span><span class="nx">bool</span><span class="p">)</span> <span class="nx">defaultValue</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-24" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-24'>#</a>
          </div>
          <p>preassign only if we have a default</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span><span class="kc">undefined</span> <span class="o">!==</span> <span class="nx">defaultValue</span><span class="p">)</span> <span class="nx">self</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">defaultValue</span><span class="p">;</span>
  <span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-25" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-25'>#</a>
          </div>
          <p>register the option</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">option</span><span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-26" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-26'>#</a>
          </div>
          <p>when it's passed assign the value
and conditionally invoke the callback</p>
        </div>
        <div class='code'>
          
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-27" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-27'>#</a>
          </div>
          <p>coercion</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">oname</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">if</span> <span class="p">(</span><span class="kc">null</span> <span class="o">!==</span> <span class="nx">val</span> <span class="o">&amp;&amp;</span> <span class="nx">fn</span><span class="p">)</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="kc">undefined</span> <span class="o">===</span> <span class="nx">self</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span>
      <span class="o">?</span> <span class="nx">defaultValue</span>
      <span class="o">:</span> <span class="nx">self</span><span class="p">[</span><span class="nx">name</span><span class="p">]);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-28" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-28'>#</a>
          </div>
          <p>unassigned or bool</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;boolean&#39;</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">self</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">||</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">self</span><span class="p">[</span><span class="nx">name</span><span class="p">])</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-29" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-29'>#</a>
          </div>
          <p>if no value, bool true, and we have a default, then use it!</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span><span class="kc">null</span> <span class="o">==</span> <span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">self</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">option</span><span class="p">.</span><span class="nx">bool</span>
          <span class="o">?</span> <span class="nx">defaultValue</span> <span class="o">||</span> <span class="kc">true</span>
          <span class="o">:</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">self</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="kc">null</span> <span class="o">!==</span> <span class="nx">val</span><span class="p">)</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-30" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-30'>#</a>
          </div>
          <p>reassign</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>      <span class="nx">self</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-31" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-31'>#</a>
          </div>
          <p>Allow unknown options on the command line.</p>
<p><span class="pydoc pydoc-param"><span>param</span> <code>{Boolean}</code></span> arg if <code>true</code> or omitted, no error will be thrown
 for unknown options.
 <span class="pydoc pydoc-api"><span>api</span> <code>public</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">allowUnknownOption</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">arg</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_allowUnknownOption</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">arg</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-32" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-32'>#</a>
          </div>
          <p>Parse <code>argv</code>, settings options and invoking commands when defined.</p>
<p><span class="pydoc pydoc-param"><span>param</span> <code>{Array}</code></span> argv
 <span class="pydoc pydoc-return"><span>return</span> <code>{Command}</code></span> for chaining
 <span class="pydoc pydoc-api"><span>api</span> <code>public</code></span> </p>
        </div>
        <div class='code'>
          
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-33" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-33'>#</a>
          </div>
          <p>implicit help</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">parse</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">argv</span><span class="p">)</span> <span class="p">{</span>

  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">executables</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">addImplicitHelpCommand</span><span class="p">();</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-34" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-34'>#</a>
          </div>
          <p>store raw args</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">rawArgs</span> <span class="o">=</span> <span class="nx">argv</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-35" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-35'>#</a>
          </div>
          <p>guess name</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">_name</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_name</span> <span class="o">||</span> <span class="nx">basename</span><span class="p">(</span><span class="nx">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;.js&#39;</span><span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-36" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-36'>#</a>
          </div>
          <p>github-style sub-commands with no sub-command</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">executables</span> <span class="o">&amp;&amp;</span> <span class="nx">argv</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">defaultExecutable</span><span class="p">)</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-37" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-37'>#</a>
          </div>
          <p>this user needs help</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="nx">argv</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">&#39;--help&#39;</span><span class="p">);</span>
  <span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-38" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-38'>#</a>
          </div>
          <p>process argv</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parseOptions</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">normalize</span><span class="p">(</span><span class="nx">argv</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">2</span><span class="p">)));</span>
  <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">args</span> <span class="o">=</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">args</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parseArgs</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">args</span><span class="p">,</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">unknown</span><span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-39" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-39'>#</a>
          </div>
          <p>executable sub-commands</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">result</span><span class="p">.</span><span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_execs</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="k">this</span><span class="p">.</span><span class="nx">_execs</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;function&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">executeSubCommand</span><span class="p">(</span><span class="nx">argv</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">unknown</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">defaultExecutable</span><span class="p">)</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-40" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-40'>#</a>
          </div>
          <p>use the default subcommand</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="nx">args</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">name</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">defaultExecutable</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">executeSubCommand</span><span class="p">(</span><span class="nx">argv</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">unknown</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-41" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-41'>#</a>
          </div>
          <p>Execute a sub-command executable.</p>
<p><span class="pydoc pydoc-param"><span>param</span> <code>{Array}</code></span> argv
 <span class="pydoc pydoc-param"><span>param</span> <code>{Array}</code></span> args
 <span class="pydoc pydoc-param"><span>param</span> <code>{Array}</code></span> unknown
 <span class="pydoc pydoc-api"><span>api</span> <code>private</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">executeSubCommand</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">argv</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">unknown</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">args</span> <span class="o">=</span> <span class="nx">args</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">unknown</span><span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">help</span><span class="p">();</span>
  <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;help&#39;</span> <span class="o">==</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="mi">1</span> <span class="o">==</span> <span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">help</span><span class="p">();</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-42" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-42'>#</a>
          </div>
          <p><cmd> --help</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>  <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;help&#39;</span> <span class="o">==</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
    <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">args</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="nx">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;--help&#39;</span><span class="p">;</span>
  <span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-43" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-43'>#</a>
          </div>
          <p>executable</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-44" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-44'>#</a>
          </div>
          <p>name of the subcommand, link <code>pm-install</code></p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">bin</span> <span class="o">=</span> <span class="nx">basename</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="s1">&#39;.js&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-45" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-45'>#</a>
          </div>
          <p>In case of globally installed, get the base dir where executable
 subcommand file should be located at</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">baseDir</span>
    <span class="p">,</span> <span class="nx">link</span> <span class="o">=</span> <span class="nx">readlink</span><span class="p">(</span><span class="nx">f</span><span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-46" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-46'>#</a>
          </div>
          <p>when symbolink is relative path</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>  <span class="k">if</span> <span class="p">(</span><span class="nx">link</span> <span class="o">!==</span> <span class="nx">f</span> <span class="o">&amp;&amp;</span> <span class="nx">link</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">!==</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">link</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">dirname</span><span class="p">(</span><span class="nx">f</span><span class="p">),</span> <span class="nx">link</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="nx">baseDir</span> <span class="o">=</span> <span class="nx">dirname</span><span class="p">(</span><span class="nx">link</span><span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-47" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-47'>#</a>
          </div>
          <p>prefer local <code>./&lt;bin&gt;</code> to bin in the $PATH</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">localBin</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">baseDir</span><span class="p">,</span> <span class="nx">bin</span><span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-48" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-48'>#</a>
          </div>
          <p>whether bin file is a js script with explicit <code>.js</code> extension</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">isExplicitJS</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">exists</span><span class="p">(</span><span class="nx">localBin</span> <span class="o">+</span> <span class="s1">&#39;.js&#39;</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">bin</span> <span class="o">=</span> <span class="nx">localBin</span> <span class="o">+</span> <span class="s1">&#39;.js&#39;</span><span class="p">;</span>
    <span class="nx">isExplicitJS</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">exists</span><span class="p">(</span><span class="nx">localBin</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">bin</span> <span class="o">=</span> <span class="nx">localBin</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">args</span> <span class="o">=</span> <span class="nx">args</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">proc</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">platform</span> <span class="o">!==</span> <span class="s1">&#39;win32&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">isExplicitJS</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">args</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">localBin</span><span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-49" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-49'>#</a>
          </div>
          <p>add executable arguments to spawn</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>      <span class="nx">args</span> <span class="o">=</span> <span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">execArgv</span> <span class="o">||</span> <span class="p">[]).</span><span class="nx">concat</span><span class="p">(</span><span class="nx">args</span><span class="p">);</span>

      <span class="nx">proc</span> <span class="o">=</span> <span class="nx">spawn</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="p">{</span> <span class="nx">stdio</span><span class="o">:</span> <span class="s1">&#39;inherit&#39;</span><span class="p">,</span> <span class="nx">customFds</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">proc</span> <span class="o">=</span> <span class="nx">spawn</span><span class="p">(</span><span class="nx">bin</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="p">{</span> <span class="nx">stdio</span><span class="o">:</span> <span class="s1">&#39;inherit&#39;</span><span class="p">,</span> <span class="nx">customFds</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">args</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">localBin</span><span class="p">);</span>
    <span class="nx">proc</span> <span class="o">=</span> <span class="nx">spawn</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">execPath</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="p">{</span> <span class="nx">stdio</span><span class="o">:</span> <span class="s1">&#39;inherit&#39;</span><span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">proc</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;close&#39;</span><span class="p">,</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">process</span><span class="p">));</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-50" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-50'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>  <span class="nx">proc</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">code</span> <span class="o">==</span> <span class="s2">&quot;ENOENT&quot;</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;\n  %s(1) does not exist, try --help\n&#39;</span><span class="p">,</span> <span class="nx">bin</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">code</span> <span class="o">==</span> <span class="s2">&quot;EACCES&quot;</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;\n  %s(1) not executable. try chmod or run with root\n&#39;</span><span class="p">,</span> <span class="nx">bin</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="p">});</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-51" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-51'>#</a>
          </div>
          <p>Store the reference to the child process</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">runningCommand</span> <span class="o">=</span> <span class="nx">proc</span><span class="p">;</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-52" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-52'>#</a>
          </div>
          <p>Normalize <code>args</code>, splitting joined short flags. For example
 the arg "-abc" is equivalent to "-a -b -c".
 This also normalizes equal sign and splits "--abc=def" into "--abc def".</p>
<p><span class="pydoc pydoc-param"><span>param</span> <code>{Array}</code></span> args
 <span class="pydoc pydoc-return"><span>return</span> <code>{Array}</code></span> 
 <span class="pydoc pydoc-api"><span>api</span> <code>private</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">normalize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">args</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="p">,</span> <span class="nx">arg</span>
    <span class="p">,</span> <span class="nx">lastOpt</span>
    <span class="p">,</span> <span class="nx">index</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">arg</span> <span class="o">=</span> <span class="nx">args</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">lastOpt</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">optionFor</span><span class="p">(</span><span class="nx">args</span><span class="p">[</span><span class="nx">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">arg</span> <span class="o">===</span> <span class="s1">&#39;--&#39;</span><span class="p">)</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-53" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-53'>#</a>
          </div>
          <p>Honor option terminator</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>      <span class="nx">ret</span> <span class="o">=</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">i</span><span class="p">));</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">lastOpt</span> <span class="o">&amp;&amp;</span> <span class="nx">lastOpt</span><span class="p">.</span><span class="nx">required</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">arg</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">arg</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="s1">&#39;-&#39;</span> <span class="o">==</span> <span class="nx">arg</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="s1">&#39;-&#39;</span> <span class="o">!=</span> <span class="nx">arg</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-54" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-54'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>      <span class="nx">arg</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="nx">c</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="sr">/^--/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">arg</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">~</span><span class="p">(</span><span class="nx">index</span> <span class="o">=</span> <span class="nx">arg</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)))</span> <span class="p">{</span>
      <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">arg</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">index</span><span class="p">),</span> <span class="nx">arg</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">));</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">arg</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-55" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-55'>#</a>
          </div>
          <p>Parse command <code>args</code>.</p>
<p>When listener(s) are available those
 callbacks are invoked, otherwise the "*"
 event is emitted and those actions are invoked.</p>
<p><span class="pydoc pydoc-param"><span>param</span> <code>{Array}</code></span> args
 <span class="pydoc pydoc-return"><span>return</span> <code>{Command}</code></span> for chaining
 <span class="pydoc pydoc-api"><span>api</span> <code>private</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">parseArgs</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">args</span><span class="p">,</span> <span class="nx">unknown</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">name</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">name</span> <span class="o">=</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">listeners</span><span class="p">(</span><span class="nx">name</span><span class="p">).</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">shift</span><span class="p">(),</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">unknown</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="nx">args</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">outputHelpIfNecessary</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">unknown</span><span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-56" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-56'>#</a>
          </div>
          <p>If there were no args and we have unknown options,
then they are extraneous and we need to error.</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span><span class="nx">unknown</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">unknownOption</span><span class="p">(</span><span class="nx">unknown</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-57" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-57'>#</a>
          </div>
          <p>Return an option matching <code>arg</code> if any.</p>
<p><span class="pydoc pydoc-param"><span>param</span> <code>{String}</code></span> arg
 <span class="pydoc pydoc-return"><span>return</span> <code>{Option}</code></span> 
 <span class="pydoc pydoc-api"><span>api</span> <code>private</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">optionFor</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">arg</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">len</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">is</span><span class="p">(</span><span class="nx">arg</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-58" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-58'>#</a>
          </div>
          <p>Parse options from <code>argv</code> returning <code>argv</code>
 void of these options.</p>
<p><span class="pydoc pydoc-param"><span>param</span> <code>{Array}</code></span> argv
 <span class="pydoc pydoc-return"><span>return</span> <code>{Array}</code></span> 
 <span class="pydoc pydoc-api"><span>api</span> <code>public</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">parseOptions</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">argv</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="p">,</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">argv</span><span class="p">.</span><span class="nx">length</span>
    <span class="p">,</span> <span class="nx">literal</span>
    <span class="p">,</span> <span class="nx">option</span>
    <span class="p">,</span> <span class="nx">arg</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">unknownOptions</span> <span class="o">=</span> <span class="p">[];</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-59" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-59'>#</a>
          </div>
          <p>parse options</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">arg</span> <span class="o">=</span> <span class="nx">argv</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-60" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-60'>#</a>
          </div>
          <p>literal args after --</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;--&#39;</span> <span class="o">==</span> <span class="nx">arg</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">literal</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="k">continue</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">literal</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">args</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">arg</span><span class="p">);</span>
      <span class="k">continue</span><span class="p">;</span>
    <span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-61" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-61'>#</a>
          </div>
          <p>find matching Option</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="nx">option</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">optionFor</span><span class="p">(</span><span class="nx">arg</span><span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-62" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-62'>#</a>
          </div>
          <p>option is defined</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span><span class="nx">option</span><span class="p">)</span> <span class="p">{</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-63" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-63'>#</a>
          </div>
          <p>requires arg</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">option</span><span class="p">.</span><span class="nx">required</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">arg</span> <span class="o">=</span> <span class="nx">argv</span><span class="p">[</span><span class="o">++</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="kc">null</span> <span class="o">==</span> <span class="nx">arg</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">optionMissingArgument</span><span class="p">(</span><span class="nx">option</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="nx">option</span><span class="p">.</span><span class="nx">name</span><span class="p">(),</span> <span class="nx">arg</span><span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-64" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-64'>#</a>
          </div>
          <p>optional arg</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">option</span><span class="p">.</span><span class="nx">optional</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">arg</span> <span class="o">=</span> <span class="nx">argv</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="kc">null</span> <span class="o">==</span> <span class="nx">arg</span> <span class="o">||</span> <span class="p">(</span><span class="s1">&#39;-&#39;</span> <span class="o">==</span> <span class="nx">arg</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="s1">&#39;-&#39;</span> <span class="o">!=</span> <span class="nx">arg</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">arg</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="o">++</span><span class="nx">i</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="nx">option</span><span class="p">.</span><span class="nx">name</span><span class="p">(),</span> <span class="nx">arg</span><span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-65" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-65'>#</a>
          </div>
          <p>bool</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="nx">option</span><span class="p">.</span><span class="nx">name</span><span class="p">());</span>
      <span class="p">}</span>
      <span class="k">continue</span><span class="p">;</span>
    <span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-66" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-66'>#</a>
          </div>
          <p>looks like an option</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span><span class="nx">arg</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="s1">&#39;-&#39;</span> <span class="o">==</span> <span class="nx">arg</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
      <span class="nx">unknownOptions</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">arg</span><span class="p">);</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-67" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-67'>#</a>
          </div>
          <p>If the next argument looks like it might be
an argument for this option, we pass it on.
If it isn't, then it'll simply be ignored</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">argv</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="s1">&#39;-&#39;</span> <span class="o">!=</span> <span class="nx">argv</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
        <span class="nx">unknownOptions</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">argv</span><span class="p">[</span><span class="o">++</span><span class="nx">i</span><span class="p">]);</span>
      <span class="p">}</span>
      <span class="k">continue</span><span class="p">;</span>
    <span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-68" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-68'>#</a>
          </div>
          <p>arg</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>    <span class="nx">args</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">arg</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="p">{</span> <span class="nx">args</span><span class="o">:</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">unknown</span><span class="o">:</span> <span class="nx">unknownOptions</span> <span class="p">};</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-69" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-69'>#</a>
          </div>
          <p>Return an object containing options as key-value pairs</p>
<p><span class="pydoc pydoc-return"><span>return</span> <code>{Object}</code></span> 
 <span class="pydoc pydoc-api"><span>api</span> <code>public</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">opts</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="p">,</span> <span class="nx">len</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">camelcase</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span><span class="p">());</span>
    <span class="nx">result</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">key</span> <span class="o">===</span> <span class="s1">&#39;version&#39;</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">_version</span> <span class="o">:</span> <span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-70" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-70'>#</a>
          </div>
          <p>Argument <code>name</code> is missing.</p>
<p><span class="pydoc pydoc-param"><span>param</span> <code>{String}</code></span> name
 <span class="pydoc pydoc-api"><span>api</span> <code>private</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">missingArgument</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;  error: missing required argument `%s&#39;&quot;</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">();</span>
  <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-71" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-71'>#</a>
          </div>
          <p><code>Option</code> is missing an argument, but received <code>flag</code> or nothing.</p>
<p><span class="pydoc pydoc-param"><span>param</span> <code>{String}</code></span> option
 <span class="pydoc pydoc-param"><span>param</span> <code>{String}</code></span> flag
 <span class="pydoc pydoc-api"><span>api</span> <code>private</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">optionMissingArgument</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">option</span><span class="p">,</span> <span class="nx">flag</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">();</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">flag</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;  error: option `%s&#39; argument missing, got `%s&#39;&quot;</span><span class="p">,</span> <span class="nx">option</span><span class="p">.</span><span class="nx">flags</span><span class="p">,</span> <span class="nx">flag</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;  error: option `%s&#39; argument missing&quot;</span><span class="p">,</span> <span class="nx">option</span><span class="p">.</span><span class="nx">flags</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">();</span>
  <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-72" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-72'>#</a>
          </div>
          <p>Unknown option <code>flag</code>.</p>
<p><span class="pydoc pydoc-param"><span>param</span> <code>{String}</code></span> flag
 <span class="pydoc pydoc-api"><span>api</span> <code>private</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">unknownOption</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">flag</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_allowUnknownOption</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;  error: unknown option `%s&#39;&quot;</span><span class="p">,</span> <span class="nx">flag</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">();</span>
  <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-73" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-73'>#</a>
          </div>
          <p>Variadic argument with <code>name</code> is not the last argument as required.</p>
<p><span class="pydoc pydoc-param"><span>param</span> <code>{String}</code></span> name
 <span class="pydoc pydoc-api"><span>api</span> <code>private</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">variadicArgNotLast</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;  error: variadic arguments must be last `%s&#39;&quot;</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">();</span>
  <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-74" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-74'>#</a>
          </div>
          <p>Set the program version to <code>str</code>.</p>
<p>This method auto-registers the "-V, --version" flag
 which will print the version number when passed.</p>
<p><span class="pydoc pydoc-param"><span>param</span> <code>{String}</code></span> str
 <span class="pydoc pydoc-param"><span>param</span> <code>{String}</code></span> flags
 <span class="pydoc pydoc-return"><span>return</span> <code>{Command}</code></span> for chaining
 <span class="pydoc pydoc-api"><span>api</span> <code>public</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">version</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="nx">flags</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_version</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_version</span> <span class="o">=</span> <span class="nx">str</span><span class="p">;</span>
  <span class="nx">flags</span> <span class="o">=</span> <span class="nx">flags</span> <span class="o">||</span> <span class="s1">&#39;-V, --version&#39;</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">option</span><span class="p">(</span><span class="nx">flags</span><span class="p">,</span> <span class="s1">&#39;output the version number&#39;</span><span class="p">);</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">str</span> <span class="o">+</span> <span class="s1">&#39;\n&#39;</span><span class="p">);</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-75" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-75'>#</a>
          </div>
          <p>Set the description to <code>str</code>.</p>
<p><span class="pydoc pydoc-param"><span>param</span> <code>{String}</code></span> str
 <span class="pydoc pydoc-return"><span>return</span> <code>{String|Command}</code></span> 
 <span class="pydoc pydoc-api"><span>api</span> <code>public</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">description</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">===</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_description</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_description</span> <span class="o">=</span> <span class="nx">str</span><span class="p">;</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-76" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-76'>#</a>
          </div>
          <p>Set an alias for the command</p>
<p><span class="pydoc pydoc-param"><span>param</span> <code>{String}</code></span> alias
 <span class="pydoc pydoc-return"><span>return</span> <code>{String|Command}</code></span> 
 <span class="pydoc pydoc-api"><span>api</span> <code>public</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">alias</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">alias</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_alias</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_alias</span> <span class="o">=</span> <span class="nx">alias</span><span class="p">;</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-77" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-77'>#</a>
          </div>
          <p>Set / get the command usage <code>str</code>.</p>
<p><span class="pydoc pydoc-param"><span>param</span> <code>{String}</code></span> str
 <span class="pydoc pydoc-return"><span>return</span> <code>{String|Command}</code></span> 
 <span class="pydoc pydoc-api"><span>api</span> <code>public</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">usage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_args</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">arg</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">humanReadableArgName</span><span class="p">(</span><span class="nx">arg</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="kd">var</span> <span class="nx">usage</span> <span class="o">=</span> <span class="s1">&#39;[options]&#39;</span>
    <span class="o">+</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">commands</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="s1">&#39; [command]&#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="o">+</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_args</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">args</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_usage</span> <span class="o">||</span> <span class="nx">usage</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_usage</span> <span class="o">=</span> <span class="nx">str</span><span class="p">;</span>

  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-78" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-78'>#</a>
          </div>
          <p>Get the name of the command</p>
<p><span class="pydoc pydoc-param"><span>param</span> <code>{String}</code></span> name
 <span class="pydoc pydoc-return"><span>return</span> <code>{String|Command}</code></span> 
 <span class="pydoc pydoc-api"><span>api</span> <code>public</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_name</span><span class="p">;</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-79" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-79'>#</a>
          </div>
          <p>Return the largest option length.</p>
<p><span class="pydoc pydoc-return"><span>return</span> <code>{Number}</code></span> 
 <span class="pydoc pydoc-api"><span>api</span> <code>private</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">largestOptionLength</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">max</span><span class="p">,</span> <span class="nx">option</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">max</span><span class="p">,</span> <span class="nx">option</span><span class="p">.</span><span class="nx">flags</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
  <span class="p">},</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-80" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-80'>#</a>
          </div>
          <p>Return help for options.</p>
<p><span class="pydoc pydoc-return"><span>return</span> <code>{String}</code></span> 
 <span class="pydoc pydoc-api"><span>api</span> <code>private</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">optionHelp</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">largestOptionLength</span><span class="p">();</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-81" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-81'>#</a>
          </div>
          <p>Prepend the help information</p>
        </div>
        <div class='code'>
          <div class="highlight"><pre>  <span class="k">return</span> <span class="p">[</span><span class="nx">pad</span><span class="p">(</span><span class="s1">&#39;-h, --help&#39;</span><span class="p">,</span> <span class="nx">width</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;  &#39;</span> <span class="o">+</span> <span class="s1">&#39;output usage information&#39;</span><span class="p">]</span>

      <span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">option</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">pad</span><span class="p">(</span><span class="nx">option</span><span class="p">.</span><span class="nx">flags</span><span class="p">,</span> <span class="nx">width</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;  &#39;</span> <span class="o">+</span> <span class="nx">option</span><span class="p">.</span><span class="nx">description</span><span class="p">;</span>
      <span class="p">}))</span>
      <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;\n&#39;</span><span class="p">);</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-82" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-82'>#</a>
          </div>
          <p>Return command help documentation.</p>
<p><span class="pydoc pydoc-return"><span>return</span> <code>{String}</code></span> 
 <span class="pydoc pydoc-api"><span>api</span> <code>private</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">commandHelp</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">commands</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">commands</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">commands</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">cmd</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">!</span><span class="nx">cmd</span><span class="p">.</span><span class="nx">_noHelp</span><span class="p">;</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-83" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-83'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>  <span class="p">}).</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">cmd</span><span class="p">)</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">cmd</span><span class="p">.</span><span class="nx">_args</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">arg</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">humanReadableArgName</span><span class="p">(</span><span class="nx">arg</span><span class="p">);</span>
    <span class="p">}).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">);</span>

    <span class="k">return</span> <span class="p">[</span>
      <span class="nx">cmd</span><span class="p">.</span><span class="nx">_name</span>
        <span class="o">+</span> <span class="p">(</span><span class="nx">cmd</span><span class="p">.</span><span class="nx">_alias</span> <span class="o">?</span> <span class="s1">&#39;|&#39;</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">.</span><span class="nx">_alias</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="o">+</span> <span class="p">(</span><span class="nx">cmd</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="s1">&#39; [options]&#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">args</span>
      <span class="p">,</span> <span class="nx">cmd</span><span class="p">.</span><span class="nx">description</span><span class="p">()</span>
    <span class="p">];</span>
  <span class="p">});</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-84" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-84'>#</a>
          </div>
          
        </div>
        <div class='code'>
          <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="nx">commands</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">max</span><span class="p">,</span> <span class="nx">command</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">max</span><span class="p">,</span> <span class="nx">command</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">);</span>
  <span class="p">},</span> <span class="mi">0</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">[</span>
    <span class="s1">&#39;&#39;</span>
    <span class="p">,</span> <span class="s1">&#39;  Commands:&#39;</span>
    <span class="p">,</span> <span class="s1">&#39;&#39;</span>

    <span class="p">,</span> <span class="nx">commands</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">cmd</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">desc</span> <span class="o">=</span> <span class="nx">cmd</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">?</span> <span class="s1">&#39;  &#39;</span> <span class="o">+</span> <span class="nx">cmd</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">pad</span><span class="p">(</span><span class="nx">cmd</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">width</span><span class="p">)</span> <span class="o">+</span> <span class="nx">desc</span><span class="p">;</span>
    <span class="p">}).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;\n&#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^/gm</span><span class="p">,</span> <span class="s1">&#39;    &#39;</span><span class="p">)</span>
    <span class="p">,</span> <span class="s1">&#39;&#39;</span>
  <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;\n&#39;</span><span class="p">);</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-85" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-85'>#</a>
          </div>
          <p>Return program help documentation.</p>
<p><span class="pydoc pydoc-return"><span>return</span> <code>{String}</code></span> 
 <span class="pydoc pydoc-api"><span>api</span> <code>private</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">helpInformation</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">desc</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_description</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">desc</span> <span class="o">=</span> <span class="p">[</span>
      <span class="s1">&#39;  &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_description</span>
      <span class="p">,</span> <span class="s1">&#39;&#39;</span>
    <span class="p">];</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">cmdName</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_name</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_alias</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">cmdName</span> <span class="o">=</span> <span class="nx">cmdName</span> <span class="o">+</span> <span class="s1">&#39;|&#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_alias</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">usage</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;&#39;</span>
    <span class="p">,</span><span class="s1">&#39;  Usage: &#39;</span> <span class="o">+</span> <span class="nx">cmdName</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">usage</span><span class="p">()</span>
    <span class="p">,</span> <span class="s1">&#39;&#39;</span>
  <span class="p">];</span>

  <span class="kd">var</span> <span class="nx">cmds</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="kd">var</span> <span class="nx">commandHelp</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">commandHelp</span><span class="p">();</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">commandHelp</span><span class="p">)</span> <span class="nx">cmds</span> <span class="o">=</span> <span class="p">[</span><span class="nx">commandHelp</span><span class="p">];</span>

  <span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;  Options:&#39;</span>
    <span class="p">,</span> <span class="s1">&#39;&#39;</span>
    <span class="p">,</span> <span class="s1">&#39;&#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">optionHelp</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^/gm</span><span class="p">,</span> <span class="s1">&#39;    &#39;</span><span class="p">)</span>
    <span class="p">,</span> <span class="s1">&#39;&#39;</span>
    <span class="p">,</span> <span class="s1">&#39;&#39;</span>
  <span class="p">];</span>

  <span class="k">return</span> <span class="nx">usage</span>
    <span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">cmds</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">desc</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;\n&#39;</span><span class="p">);</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-86" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-86'>#</a>
          </div>
          <p>Output help information for this command</p>
<p><span class="pydoc pydoc-api"><span>api</span> <code>public</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">outputHelp</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>

    <span class="nx">cb</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">passthru</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">passthru</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">cb</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">helpInformation</span><span class="p">()));</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;--help&#39;</span><span class="p">);</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-87" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-87'>#</a>
          </div>
          <p>Output help information and exit.</p>
<p><span class="pydoc pydoc-api"><span>api</span> <code>public</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="nx">Command</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">help</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">cb</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">outputHelp</span><span class="p">(</span><span class="nx">cb</span><span class="p">);</span>
  <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">();</span>
<span class="p">};</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-88" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-88'>#</a>
          </div>
          <p>Camel-case the given <code>flag</code></p>
<p><span class="pydoc pydoc-param"><span>param</span> <code>{String}</code></span> flag
 <span class="pydoc pydoc-return"><span>return</span> <code>{String}</code></span> 
 <span class="pydoc pydoc-api"><span>api</span> <code>private</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="kd">function</span> <span class="nx">camelcase</span><span class="p">(</span><span class="nx">flag</span><span class="p">)</span> <span class="p">{</span>

  <span class="k">return</span> <span class="nx">flag</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">).</span><span class="nx">reduce</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="nx">word</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">str</span> <span class="o">+</span> <span class="nx">word</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">word</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-89" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-89'>#</a>
          </div>
          <p>Pad <code>str</code> to <code>width</code>.</p>
<p><span class="pydoc pydoc-param"><span>param</span> <code>{String}</code></span> str
 <span class="pydoc pydoc-param"><span>param</span> <code>{Number}</code></span> width
 <span class="pydoc pydoc-return"><span>return</span> <code>{String}</code></span> 
 <span class="pydoc pydoc-api"><span>api</span> <code>private</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="kd">function</span> <span class="nx">pad</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="nx">width</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">len</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">width</span> <span class="o">-</span> <span class="nx">str</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">str</span> <span class="o">+</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">len</span> <span class="o">+</span> <span class="mi">1</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">);</span>
<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-90" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-90'>#</a>
          </div>
          <p>Output help information if necessary</p>
<p><span class="pydoc pydoc-param"><span>param</span> <code>{Command}</code></span> command to output help for
 <span class="pydoc pydoc-param"><span>param</span> <code>{Array}</code></span> array of options to search for -h or --help
 <span class="pydoc pydoc-api"><span>api</span> <code>private</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="kd">function</span> <span class="nx">outputHelpIfNecessary</span><span class="p">(</span><span class="nx">cmd</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span> <span class="o">||</span> <span class="p">[];</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">options</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">options</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;--help&#39;</span> <span class="o">||</span> <span class="nx">options</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;-h&#39;</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">cmd</span><span class="p">.</span><span class="nx">outputHelp</span><span class="p">();</span>
      <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-91" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-91'>#</a>
          </div>
          <p>Takes an argument an returns its human readable equivalent for help usage.</p>
<p><span class="pydoc pydoc-param"><span>param</span> <code>{Object}</code></span> arg
 <span class="pydoc pydoc-return"><span>return</span> <code>{String}</code></span> 
 <span class="pydoc pydoc-api"><span>api</span> <code>private</code></span> </p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="kd">function</span> <span class="nx">humanReadableArgName</span><span class="p">(</span><span class="nx">arg</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">nameOutput</span> <span class="o">=</span> <span class="nx">arg</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="p">(</span><span class="nx">arg</span><span class="p">.</span><span class="nx">variadic</span> <span class="o">===</span> <span class="kc">true</span> <span class="o">?</span> <span class="s1">&#39;...&#39;</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>

  <span class="k">return</span> <span class="nx">arg</span><span class="p">.</span><span class="nx">required</span>
    <span class="o">?</span> <span class="s1">&#39;&lt;&#39;</span> <span class="o">+</span> <span class="nx">nameOutput</span> <span class="o">+</span> <span class="s1">&#39;&gt;&#39;</span>
    <span class="o">:</span> <span class="s1">&#39;[&#39;</span> <span class="o">+</span> <span class="nx">nameOutput</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span>
<span class="p">}</span></pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
    <div class='section'>
    <a id="section-92" class="section-anchor"></a>
    <section>
        <div class='docs'>
          <div class='octowrap'>
            <a class='octothorpe' href='#section-92'>#</a>
          </div>
          <p>for versions before node v0.8 when there weren't <code>fs.existsSync</code></p>
        </div>
        <div class='code'>
          <div class="highlight"><pre><span class="kd">function</span> <span class="nx">exists</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">statSync</span><span class="p">(</span><span class="nx">file</span><span class="p">).</span><span class="nx">isFile</span><span class="p">())</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

</pre></div>
        </div>
        <div class='clearall'></div>
    </section>
    </div>
  </div>
</body>
